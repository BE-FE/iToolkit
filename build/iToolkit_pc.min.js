/**
 * iToolkit v1.0.0
 * Revised in 2016-01-20 17:47:11
 * Released under the ISC License.
 */

!function(t,e){"use strict";function n(t){var e=V(0),n=t.trim().slice(e.length).match(/^\s*(\S+?)\s*(?:,\s*(\S+))?\s+in\s+(.+)$/);return n?{key:n[1],pos:n[2],val:e+n[3]}:{val:t}}function r(t,e,n){var r={};return r[t.key]=e,t.pos&&(r[t.pos]=n),r}function o(t,e,o){d(t,"each");var i,a=h(t),s=t.outerHTML,c=!!K[a],l=K[a]||{tmpl:s},f=t.parentNode,p=document.createComment("riot placeholder"),v=[],m=g(t);f.insertBefore(p,t),o=n(o),e.one("premount",function(){f.stub&&(f=e.root),t.parentNode.removeChild(t)}).on("update",function(){var n=X(o.val,e);I(n)||(i=n?JSON.stringify(n):"",n=n?Object.keys(n).map(function(t){return r(o,t,n[t])}):[]);for(var s=document.createDocumentFragment(),d=v.length,g=n.length;d>g;)v[--d].unmount(),v.splice(d,1);for(d=0;g>d;++d){var h=!i&&o.key?r(o,n[d],d):n[d];v[d]?v[d].update(h):(v[d]=new u(l,{parent:e,isLoop:!0,hasImpl:c,root:q.test(a)?f:t.cloneNode(),item:h},t.innerHTML),v[d]._item=h,v[d].mount(),s.appendChild(v[d].root)),v[d]._item=h}f.insertBefore(s,p),m&&(e.tags[a]=v)}).one("updated",function(){var t=Object.keys(e);T(f,function(n){1!=n.nodeType||n.isLoop||n._looped||(n._visited=!1,n._looped=!0,E(n,e,t))})})}function i(t,e,n){T(t,function(t){if(1==t.nodeType){t.isLoop=t.isLoop||t.parentNode&&t.parentNode.isLoop||t.getAttribute("each")?1:0;var r=g(t);r&&!t.isLoop&&n.push(v(r,t,e)),t.isLoop||E(t,e,[])}})}function a(t,e,n){function r(t,e,r){if(e.indexOf(V(0))>=0){var o={dom:t,expr:e};n.push(y(o,r))}}T(t,function(t){var n=t.nodeType;if(3==n&&"STYLE"!=t.parentNode.tagName&&r(t,t.nodeValue),1==n){var i=t.getAttribute("each");return i?(o(t,e,i),!1):(f(t.attributes,function(e){var n=e.name,o=n.split("__")[1];return r(t,e.value,{attr:o||n,bool:o}),o?(d(t,n),!1):void 0}),g(t)?!1:void 0)}})}function u(t,n,r){function o(){var t=x&&T?d:h||d;f(S.attributes,function(e){g[e.name]=X(e.value,t)}),f(Object.keys(H),function(e){g[e]=X(H[e],t)})}function u(t){for(var e in L)typeof d[e]!==R&&(d[e]=t[e])}function s(){d.parent&&T&&f(Object.keys(d.parent),function(t){var e=!~P.indexOf(t)&&~B.indexOf(t);(typeof d[t]===R||e)&&(e||B.push(t),d[t]=d.parent[t])})}function c(t){if(f(E,function(e){e[t?"mount":"unmount"]()}),h){var e=t?"on":"off";T?h[e]("unmount",d.unmount):h[e]("update",d.update)[e]("unmount",d.unmount)}}var d=j.observable(this),g=M(n.opts)||{},v=Y(t.tmpl),h=n.parent,T=n.isLoop,x=n.hasImpl,L=b(n.item),k=[],E=[],S=n.root,_=t.fn,A=S.tagName.toLowerCase(),H={},B=[];_&&S._tag&&S._tag.unmount(!0),this.isMounted=!1,S.isLoop=T,S._tag=this,this._id=O++,y(this,{parent:h,root:S,opts:g,tags:{}},L),f(S.attributes,function(t){var e=t.value;V(/{.*}/).test(e)&&(H[t.name]=e)}),v.innerHTML&&!/^(select|optgroup|table|tbody|tr|col(?:group)?)$/.test(A)&&(v.innerHTML=N(v.innerHTML,r)),this.update=function(t){t=b(t),s(),t&&typeof L===$&&(u(t),L=t),y(d,t),o(),d.trigger("update",t),l(k,d),d.trigger("updated")},this.mixin=function(){f(arguments,function(t){t=typeof t===F?j.mixin(t):t,f(Object.keys(t),function(e){"init"!=e&&(d[e]=p(t[e])?t[e].bind(d):t[e])}),t.init&&t.init.bind(d)()})},this.mount=function(){if(o(),_&&_.call(d,g),a(v,d,k),c(!0),(t.attrs||x)&&(C(t.attrs,function(t,e){S.setAttribute(t,e)}),a(d.root,d,k)),(!d.parent||T)&&d.update(L),d.trigger("premount"),T&&!x)d.root=S=v.firstChild;else{for(;v.firstChild;)S.appendChild(v.firstChild);S.stub&&(d.root=S=h.root)}!d.parent||d.parent.isMounted?(d.isMounted=!0,d.trigger("mount")):d.parent.one("mount",function(){w(d.root)||(d.parent.isMounted=d.isMounted=!0,d.trigger("mount"))})},this.unmount=function(t){var n,r=S,o=r.parentNode;if(o){if(h)n=m(h),I(n.tags[A])?f(n.tags[A],function(t,e){t._id==d._id&&n.tags[A].splice(e,1)}):n.tags[A]=e;else for(;r.firstChild;)r.removeChild(r.firstChild);t?o.removeAttribute("riot-tag"):o.removeChild(r)}d.trigger("unmount"),c(),d.off("*"),S._tag=null},i(v,this,E)}function s(e,n,r,o){r[e]=function(e){var i,a=o._item,u=o.parent;if(!a)for(;u&&!a;)a=u._item,u=u.parent;e=e||t.event;try{e.currentTarget=r,e.target||(e.target=e.srcElement),e.which||(e.which=e.charCode||e.keyCode)}catch(s){}e.item=a,n.call(o,e)===!0||/radio|check/.test(r.type)||(e.preventDefault&&e.preventDefault(),e.returnValue=!1),e.preventUpdate||(i=a?m(u):o,i.update())}}function c(t,e,n){t&&(t.insertBefore(n,e),t.removeChild(e))}function l(t,e){f(t,function(t){var n=t.dom,r=t.attr,o=X(t.expr,e),i=t.dom.parentNode;if(t.bool?o=o?r:!1:null==o&&(o=""),i&&"TEXTAREA"==i.tagName&&(o=(""+o).replace(/riot-/g,"")),t.value!==o){if(t.value=o,!r)return void(n.nodeValue=""+o);if(d(n,r),p(o))s(r,o,n,e);else if("if"==r){var a=t.stub,u=function(){c(a.parentNode,a,n)},l=function(){c(n.parentNode,n,a)};o?a&&(u(),n.inStub=!1,w(n)||T(n,function(t){t._tag&&!t._tag.isMounted&&(t._tag.isMounted=!!t._tag.trigger("mount"))})):(a=t.stub=a||document.createTextNode(""),n.parentNode?l():(e.parent||e).one("updated",l),n.inStub=!0)}else if(/^(show|hide)$/.test(r))"hide"==r&&(o=!o),n.style.display=o?"":"none";else if("value"==r)n.value=o;else if(S(r,H)&&r!=B)o&&n.setAttribute(r.slice(H.length),o);else{if(t.bool&&(n[r]=o,!o))return;typeof o!==$&&n.setAttribute(r,o)}}})}function f(t,e){for(var n,r=0,o=(t||[]).length;o>r;r++)n=t[r],null!=n&&e(n,r)===!1&&r--;return t}function p(t){return typeof t===D||!1}function d(t,e){t.removeAttribute(e)}function g(t){return t.tagName&&K[t.getAttribute(B)||t.tagName.toLowerCase()]}function v(t,e,n){var r,o=new u(t,{root:e,parent:n},e.innerHTML),i=h(e),a=m(n);return o.parent=a,r=a.tags[i],r?(I(r)||(a.tags[i]=[r]),~a.tags[i].indexOf(o)||a.tags[i].push(o)):a.tags[i]=o,e.innerHTML="",o}function m(t){for(var e=t;!g(e.root)&&e.parent;)e=e.parent;return e}function h(t){var e=g(t),n=t.getAttribute("name"),r=n&&n.indexOf(V(0))<0?n:e?e.name:t.tagName.toLowerCase();return r}function y(t){for(var e,n=arguments,r=1;r<n.length;++r)if(e=n[r])for(var o in e)t[o]=e[o];return t}function b(t){if(!(t instanceof u||t&&typeof t.trigger==D))return t;var e={};for(var n in t)~P.indexOf(n)||(e[n]=t[n]);return e}function T(t,e){if(t){if(e(t)===!1)return;for(t=t.firstChild;t;)T(t,e),t=t.nextSibling}}function C(t,e){for(var n,r=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;n=r.exec(t);)e(n[1].toLowerCase(),n[2]||n[3]||n[4])}function w(t){for(;t;){if(t.inStub)return!0;t=t.parentNode}return!1}function x(t){return document.createElement(t)}function N(t,e){return t.replace(/<(yield)\/?>(<\/\1>)?/gi,e||"")}function L(t,e){return(e||document).querySelectorAll(t)}function k(t,e){return(e||document).querySelector(t)}function M(t){function e(){}return e.prototype=t,new e}function E(t,e,n){if(!t._visited){var r,o=t.getAttribute("id")||t.getAttribute("name");o&&(n.indexOf(o)<0&&(r=e[o],r?I(r)?r.push(t):e[o]=[r,t]:e[o]=t),t._visited=!0)}}function S(t,e){return t.slice(0,e.length)===e}function _(t){if(!j.render){J||(J=x("style"),J.setAttribute("type","text/css"));var e=document.head||document.getElementsByTagName("head")[0];if(J.styleSheet?J.styleSheet.cssText+=t:J.innerHTML+=t,!J._rendered)if(J.styleSheet)document.body.appendChild(J);else{var n=k("style[type=riot]");n?(n.parentNode.insertBefore(J,n),n.parentNode.removeChild(n)):e.appendChild(J)}J._rendered=!0}}function A(t,e,n){var r=K[e],o=t._innerHTML=t._innerHTML||t.innerHTML;return t.innerHTML="",r&&t&&(r=new u(r,{root:t,opts:n},o)),r&&r.mount?(r.mount(),z.push(r),r.on("unmount",function(){z.splice(z.indexOf(r),1)})):void 0}var j={version:"v2.2.4",settings:{}},O=0,H="riot-",B=H+"tag",F="string",$="object",R="undefined",D="function",q=/^(?:opt(ion|group)|tbody|col|t[rhd])$/,P=["_item","_id","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],G=0|(t&&t.document||{}).documentMode,I=Array.isArray;j.observable=function(t){t=t||{};var e={},n=0;return t.on=function(r,o){return p(o)&&(typeof o.id===R&&(o._id=n++),r.replace(/\S+/g,function(t,n){(e[t]=e[t]||[]).push(o),o.typed=n>0})),t},t.off=function(n,r){return"*"==n?e={}:n.replace(/\S+/g,function(t){if(r)for(var n,o=e[t],i=0;n=o&&o[i];++i)n._id==r._id&&o.splice(i--,1);else e[t]=[]}),t},t.one=function(e,n){function r(){t.off(e,r),n.apply(t,arguments)}return t.on(e,r)},t.trigger=function(n){for(var r,o=[].slice.call(arguments,1),i=e[n]||[],a=0;r=i[a];++a)r.busy||(r.busy=1,r.apply(t,r.typed?[n].concat(o):o),i[a]!==r&&a--,r.busy=0);return e.all&&"all"!=n&&t.trigger.apply(t,["all",n].concat(o)),t},t},j.mixin=function(){var t={};return function(e,n){return n?void(t[e]=n):t[e]}}(),function(t,e,n){function r(){return u.href.split("#")[1]||""}function o(t){return t.split("/")}function i(t){t.type&&(t=r()),t!=a&&(s.trigger.apply(null,["H"].concat(o(t))),a=t)}if(n){var a,u=n.location,s=t.observable(),c=!1,l=t.route=function(t){t[0]?(u.hash=t,i(t)):s.on("H",t)};l.exec=function(t){t.apply(null,o(r()))},l.parser=function(t){o=t},l.stop=function(){c&&(n.removeEventListener?n.removeEventListener(e,i,!1):n.detachEvent("on"+e,i),s.off("*"),c=!1)},l.start=function(){c||(n.addEventListener?n.addEventListener(e,i,!1):n.attachEvent("on"+e,i),c=!0)},l.start()}}(j,"hashchange",t);var J,V=function(t){var e,n,r,o=/[{}]/g;return function(i){var a=j.settings.brackets||t;return e!==a&&(e=a,r=a.split(" "),n=r.map(function(t){return t.replace(/(?=.)/g,"\\")})),i instanceof RegExp?a===t?i:new RegExp(i.source.replace(o,function(t){return n[~~("}"===t)]}),i.global?"g":""):r[i]}}("{ }"),X=function(){function e(t,e){return t.indexOf(V(0))<0?(t=t.replace(/\n|\r\n?/g,"\n"),function(){return t}):(t=t.replace(V(/\\{/g),"￰").replace(V(/\\}/g),"￱"),e=o(t,i(t,V(/{/),V(/}/))),t=2!==e.length||e[0]?"["+e.map(function(t,e){return e%2?n(t,!0):'"'+t.replace(/\n|\r\n?/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':n(e[1]),new Function("d","return "+t.replace(/\uFFF0/g,V(0)).replace(/\uFFF1/g,V(1))+";"))}function n(t,e){return t=t.replace(/\n|\r\n?/g," ").replace(V(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w- "']+ *:/.test(t)?"["+i(t,/["' ]*[\w- ]+["' ]*:/,/,(?=["' ]*[\w- ]+["' ]*:)|}|$/).map(function(t){return t.replace(/^[ "']*(.+?)[ "']*: *(.+?),? *$/,function(t,e,n){return n.replace(/[^&|=!><]+/g,r)+'?"'+e+'":"",'})}).join("")+'].join(" ").trim()':r(t,e)}function r(t,e){return t=t.trim(),t?"(function(v){try{v="+t.replace(s,function(t,e,n){return n?'(("'+n+u+n+")":t})+"}catch(e){}return "+(e===!0?'!v&&v!==0?"":v':"v")+"}).call(d)":""}function o(t,e){var n=[];return e.map(function(e,r){r=t.indexOf(e),n.push(t.slice(0,r),e),t=t.slice(r+e.length)}),t&&n.push(t),n}function i(t,e,n){var r,o=0,i=[],a=new RegExp("("+e.source+")|("+n.source+")","g");return t.replace(a,function(e,n,a,u){!o&&n&&(r=u),o+=n?1:-1,o||null==a||i.push(t.slice(r,u+a.length))}),i}var a={},u='"in d?d:'+(t?"window).":"global)."),s=/(['"\/])(?:[^\\]*?|\\.|.)*?\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function\s*\()|([A-Za-z_$]\w*)/g;return function(t,n){return t&&(a[t]||(a[t]=e(t)))(n)}}(),Y=function(t){function e(e){var i=e&&e.match(/^\s*<([-\w]+)/),a=i&&i[1].toLowerCase(),u=r[a]||o,s=x(u);return s.stub=!0,t&&a&&(i=a.match(q))?n(s,e,a,!!i[1]):s.innerHTML=e,s}function n(t,e,n,r){var i,a=x(o),u=r?"select>":"table>";a.innerHTML="<"+u+e+"</"+u,i=a.getElementsByTagName(n)[0],i&&t.appendChild(i)}var r={tr:"tbody",th:"tr",td:"tr",tbody:"table",col:"colgroup"},o="div";return t=t&&10>t,e}(G),z=[],K={};j.tag=function(t,e,n,r,o){return p(r)&&(o=r,/^[\w\-]+\s?=/.test(n)?(r=n,n=""):r=""),n&&(p(n)?o=n:_(n)),K[t]={name:t,tmpl:e,attrs:r,fn:o},t},j.mount=function(t,e,n){function r(t){var e="";return f(t,function(t){e+=", *["+B+'="'+t.trim()+'"]'}),e}function o(){var t=Object.keys(K);return t+r(t)}function i(t){var r;if(t.tagName){!e||(r=t.getAttribute(B))&&r==e||t.setAttribute(B,e);var o=A(t,e||t.getAttribute(B)||t.tagName.toLowerCase(),n);o&&s.push(o)}else t.length&&f(t,i)}var a,u,s=[];if(typeof e===$&&(n=e,e=0),typeof t===F?("*"===t?t=u=o():t+=r(t.split(",")),a=L(t)):a=t,"*"===e){if(e=u||o(),a.tagName)a=L(e,a);else{var c=[];f(a,function(t){c.push(L(e,t))}),a=c}e=0}return a.tagName?i(a):f(a,i),s},j.update=function(){return f(z,function(t){t.update()})},j.mountTo=j.mount,j.util={brackets:V,tmpl:X},typeof exports===$?module.exports=j:"function"==typeof define&&define.amd?define(function(){return t.riot=j}):t.riot=j}("undefined"!=typeof window?window:void 0);var utils={httpGet:function(t,e,n,r){var o=new XMLHttpRequest,t=utils.concatParams(t,e);o.open("GET",t,!0),o.send(null),o.onreadystatechange=function(){if(4===o.readyState&&(r&&"function"==typeof r&&r(),200===o.status)){var t=o.responseText;try{if("string"==typeof t)var e=JSON.parse(t);else var e=t}catch(i){alert("解析错误")}n(e)}}},httpPost:function(t,e,n,r){var o=new XMLHttpRequest;o.open("POST",t,!0),o.setRequestHeader("Content-type","application/json"),o.send(e),o.onreadystatechange=function(){if(4===o.readyState)if(r&&"function"==typeof r&&r(),200===o.status){try{var t=JSON.parse(o.responseText)}catch(e){console.log("解析错误")}n(t)}else console.log("网络错误")}},jsonp:function(t,e,n){var r=Date.now(),o=document.createElement("script"),i=document.getElementsByTagName("head")[0],t=utils.concatParams(t,e);if(e.callback)var a=t,u=e.callback;else{if(t.match(/\?/))var a=t+"&callback=jsonpCallback"+r;else var a=t+"?callback=jsonpCallback"+r;var u="jsonpCallback"+r}o.src=a,i.appendChild(o),window[u]=function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}n(t)},o.onerror=function(){console.log("jsonp error")},o.onload=function(){i.removeChild(o)}},htmlEncode:function(t){var e=document.createElement("div");return e.innerHTML=t,e.innerText},concatParams:function(t,e){if(t.match(/\?/))var n="&";else var n="?";for(i in e)n=n+i+"="+e[i]+"&";return n=n.replace(/&$/,""),t+n},setCookie:function(t,e,n,r){var o=new Date,r=r||"/";o.setTime(o.getTime()+n),document.cookie=t+"="+escape(e)+";path="+r+";expires="+o.toGMTString()},transBytes:function(t){var e=["B","KB","MB","GB","TB"];if(0==t)return"n/a";var n=parseInt(Math.floor(Math.log(t)/Math.log(1024)));return 0==n?t+e[n]:(t/Math.pow(1024,n)).toFixed(1)+e[n]},transTimes:function(t){var t=parseInt(t,10),e=new Date(1e3*t),n=(new Date).getTime()/1e3,r=n-t;if(86400>r)return e.getHours()+":"+e.getMinutes();if(r>86400&&172800>r)return"昨天";if(r>172800){var o=(e.getFullYear()+"-").substring(2),i=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",a=e.getDate()<10?"0"+e.getDate():e.getDate();return o+i+a}},hasClass:function(t,e){return t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},addClass:function(t,e){t.className.trim(),this.hasClass(t,e)||(t.className+=" "+e)},removeClass:function(t,e){if(utils.hasClass(t,e)){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}},toggleClass:function(t,e){if(utils.hasClass(t,e)){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}else t.className+=" "+e},insertAfter:function(t,e){var n=e.parentNode;n.lastChild==e?n.appendChild(t):n.insertBefore(t,e.nextSibling)},insertAfterText:function(t,e){var n=e.parentNode;if(n.lastChild==e)n.appendChild(t);else{var r=e.nextSibling;3===r.nodeType&&(r=r.nextSibling),n.insertBefore(t,r)}},isType:function(t){return function(e){return toString.call(e)==="[object "+t+"]"}},makeArray:function(){return Array.prototype.concat(obj)},extend:function(t,e){for(var n in e)t[n]||(t[n]=e[n])},deepCopy:function(t,e){var e=e||{};for(var n in t)"[object Object]"===toString.call(t[n])?(e[n]={},this.deepCopy(t[n],e[n])):"[object Array]"===toString.call(t[n])?(e[n]=[],this.deepCopy(t[n],e[n])):e[n]=t[n];return e}};utils.extend(utils,{isArray:utils.isType("Array"),isObject:utils.isType("Object"),isFunction:utils.isType("Function"),isElement:function(t){return-1!==toString.call(t).indexOf("Element")}}),utils.extend(utils,{jsLoader:function(){function t(){return p++}function e(t){return t.match(/\.css\??/)}function n(e){this.uri=e,this.cid=t(),this.status=T}function r(t,e){return r.then(t,e).start(),r}function o(t){throw t}function i(t){if(t||d.length)for(var e=0;e<t.task.length;e++){var n=t.task[e];u(n,t)}}function a(t,e){var r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=t.uri,l.appendChild(r),r=null,t.status=h,n.resolve.call(e)}function u(t,r){function o(e){if("error"===e.type&&(t.status=b),"load"===e.type&&(t.status=h),n.resolve.call(r,t),t.changeStatus){t.changeStatus=!1;for(var o=0;o<C[t.cid].length;o++){var i=C[t.cid][o];n.resolve.call(i.resolver,i.js)}C[t.cid]=null}u.onload=u.onerror=null,l.removeChild(u),u=null}if(v(t.uri))try{t.uri(),t.status=h,n.resolve.call(r)}catch(i){t.status=b,n.resolve.call(r)}else{if(t.status===h)return void n.resolve.call(r);if(e(t.uri))return void a(t,r);if(t.status===y)return t.changeStatus=!0,C[t.cid]=C[t.cid]||[],void C[t.cid].push({js:t,resolver:r});t.status=y;var u=document.createElement("script");u.async=!0,u.src=t.uri,u.onload=u.onerror=o,l.appendChild(u)}}function s(t){var e=c(t);return n.get(e?e:t)}function c(t){return r.alias[t]}var l=document.head||document.getElementsByTagName("head")[0],f={},p=0,d=[],g=utils.isArray,v=utils.isFunction,m=utils.makeArray,h="done",y="inprocess",b="rejected",T="pending",C={};return n.get=function(t){return f[t]||(f[t]=new n(t))},n.resolve=function(t){var e=this;if(e.status++,t&&t.status===b){var n=Error("Source: "+t.uri+" load failed");o(n)}e.status===e.task.length&&setTimeout(function(){e.callback&&e.callback(),e=null,i(d.shift())},7)},r.then=function(t,e){if(!t)return r;g(t)||(t=m(t));for(var n={task:[],callback:e,status:0},o=0;o<t.length;o++)n.task.push(s(t[o]));return d.push(n),r},r.start=function(){return i(d.shift()),r},r.alias={},r}()});var EventCtrl=EC=riot.observable(),iToolkit={};iToolkit.methodRegister=function(t,e){for(var n in iToolkit)if(t===n)return;iToolkit[t]=e},iToolkit.tableExtend={};