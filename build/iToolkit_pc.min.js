/**
 * iToolkit v1.0.0
 * Revised in 2015-08-25 13:53:07
 * Released under the ISC License.
 */

!function(e){"use strict";function t(e){var t=D(0),n=e.slice(t.length).match(/\s*(\S+?)\s*(?:,\s*(\S)+)?\s+in\s+(.+)/);return n?{key:n[1],pos:n[2],val:t+n[3]}:{val:e}}function n(e,t,n){var i={};return i[e.key]=t,e.pos&&(i[e.pos]=n),i}function i(e,i,a){p(e,"each");var o,s=e.outerHTML,l=e.parentNode,u=document.createComment("riot placeholder"),c=[],d=A(e);l.insertBefore(u,e),a=t(a),i.one("premount",function(){l.stub&&(l=i.root),e.parentNode.removeChild(e)}).on("update",function(){var t,p=I(a.val,i);if(!O(p)){if(t=o,o=p?JSON.stringify(p):"",o===t)return;p=p?Object.keys(p).map(function(e){return n(a,e,p[e])}):[]}for(var f=document.createDocumentFragment(),h=c.length,m=p.length;h>m;)c[--h].unmount();for(c.length=m,t=!o&&!!a.key,h=0;m>h;++h){var v=t?n(a,p[h],h):p[h];c[h]||((c[h]=new r({tmpl:s},{parent:i,isLoop:!0,root:l,item:v})).mount(),f.appendChild(c[h].root)),c[h]._item=v,c[h].update(v)}l.insertBefore(f,u),d&&(i.tags[g(e)]=c)}).one("updated",function(){var e=Object.keys(i);v(l,function(t){1!=t.nodeType||t.isLoop||t._looped||(t._visited=!1,t._looped=!0,k(t,i,e))})})}function a(e,t,n){v(e,function(e){if(1==e.nodeType){e.isLoop=e.parentNode&&e.parentNode.isLoop||e.getAttribute("each")?1:0;var i=A(e);if(i&&!e.isLoop){for(var a,o=new r(i,{root:e,parent:t},e.innerHTML),s=g(e),l=t;!A(l.root)&&l.parent;)l=l.parent;o.parent=l,a=l.tags[s],a?(O(a)||(l.tags[s]=[a]),l.tags[s].push(o)):l.tags[s]=o,e.innerHTML="",n.push(o)}e.isLoop||k(e,t,[])}})}function o(e,t,n){function a(e,t,i){if(t.indexOf(D(0))>=0){var a={dom:e,expr:t};n.push(h(a,i))}}v(e,function(e){var n=e.nodeType;if(3==n&&"STYLE"!=e.parentNode.tagName&&a(e,e.nodeValue),1==n){var o=e.getAttribute("each");return o&&o.match(/\{[\s\S]+\}/)?(i(e,t,o),!1):(c(e.attributes,function(t){var n=t.name,i=n.split("__")[1];return a(e,t.value,{attr:i||n,bool:i}),i?(p(e,n),!1):void 0}),A(e)?!1:void 0)}})}function r(e,t,n){function i(){c(N.attributes,function(e){d[e.name]=I(e.value,g||l)}),c(Object.keys(A),function(e){d[e]=I(A[e],g||l)})}function r(e){if(c(k,function(t){t[e?"mount":"unmount"]()}),g){var t=e?"on":"off";v?g[t]("unmount",l.unmount):g[t]("update",l.update)[t]("unmount",l.unmount)}}var s,l=M.observable(this),d=C(t.opts)||{},p=m(e.tmpl),g=t.parent,v=t.isLoop,y=t.item,w=[],k=[],N=t.root,x=e.fn,E=N.tagName.toLowerCase(),A={},S=/([\w\-]+)\s?=\s?['"]([^'"]+)["']/gim;if(x&&N._tag&&N._tag.unmount(!0),this.isMounted=!1,e.attrs){var L=e.attrs.match(S);c(L,function(e){var t=e.split(/\s?=\s?/);N.setAttribute(t[0],t[1].replace(/['"]/g,""))})}N._tag=this,this._id=f(~~((new Date).getTime()*Math.random())),h(this,{parent:g,root:N,opts:d,tags:{}},y),c(N.attributes,function(e){var t=e.value;D(/\{.*\}/).test(t)&&(A[e.name]=t)}),p.innerHTML&&!/select|select|optgroup|tbody|tr/.test(E)&&("TABLE-VIEW"!==N.tagName,p.innerHTML=T(p.innerHTML,n)),this.update=function(e){h(l,e),i(),l.trigger("update",e),u(w,l,e),l.trigger("updated")},this.mixin=function(){c(arguments,function(e){e="string"==typeof e?M.mixin(e):e,c(Object.keys(e),function(t){"init"!=t&&(l[t]="function"==typeof e[t]?e[t].bind(l):e[t])}),e.init&&e.init.bind(l)()})},this.mount=function(){if(i(),x&&x.call(l,d),r(!0),o(p,l,w),l.parent||l.update(),l.trigger("premount"),v)l.root=N=s=p.firstChild;else{for(;p.firstChild;)N.appendChild(p.firstChild);N.stub&&(l.root=N=g.root)}!l.parent||l.parent.isMounted?(l.isMounted=!0,l.trigger("mount")):l.parent.one("mount",function(){b(l.root)||(l.parent.isMounted=l.isMounted=!0,l.trigger("mount"))})},this.unmount=function(e){var t=s||N,n=t.parentNode;if(n){if(g)O(g.tags[E])?c(g.tags[E],function(e,t){e._id==l._id&&g.tags[E].splice(t,1)}):g.tags[E]=void 0;else for(;t.firstChild;)t.removeChild(t.firstChild);e||n.removeChild(t)}l.trigger("unmount"),r(),l.off("*"),N._tag=null},a(p,this,k)}function s(t,n,i,a,o){i[t]=function(t){t=t||e.event,t.which||(t.which=t.charCode||t.keyCode),t.target||(t.target=t.srcElement);try{t.currentTarget=i}catch(r){}if(t.item=a._item?a._item:o,n.call(a,t)===!0||/radio|check/.test(i.type)||(t.preventDefault&&t.preventDefault(),t.returnValue=!1),!t.preventUpdate){var s=o?a.parent:a;s.update()}}}function l(e,t,n){e&&(e.insertBefore(n,t),e.removeChild(t))}function u(e,t,n){c(e,function(e,i){var a=e.dom,o=e.attr,r=I(e.expr,t),u=e.dom.parentNode;if(null==r&&(r=""),u&&"TEXTAREA"==u.tagName&&(r=r.replace(/riot-/g,"")),e.value!==r){if(e.value=r,!o)return a.nodeValue=r.toString();if(p(a,o),"function"==typeof r)s(o,r,a,t,n);else if("if"==o){var c=e.stub;r?c&&(l(c.parentNode,c,a),a.inStub=!1,b(a)||v(a,function(e){e._tag&&!e._tag.isMounted&&(e._tag.isMounted=!!e._tag.trigger("mount"))})):(c=e.stub=c||document.createTextNode(""),l(a.parentNode,a,c),a.inStub=!0)}else if(/^(show|hide)$/.test(o))"hide"==o&&(r=!r),a.style.display=r?"":"none";else if("value"==o)a.value=r;else if("riot-"==o.slice(0,5)&&"riot-tag"!=o)o=o.slice(5),r?a.setAttribute(o,r):p(a,o);else{if(e.bool){if(a[o]=r,!r)return;r=o}"object"!=typeof r&&a.setAttribute(o,r)}}})}function c(e,t){for(var n,i=0,a=(e||[]).length;a>i;i++)n=e[i],null!=n&&t(n,i)===!1&&i--;return e}function d(e){return"function"==typeof e||!1}function p(e,t){e.removeAttribute(t)}function f(e){return(e^e>>31)-(e>>31)}function g(e){var t=A(e),n=e.getAttribute("name"),i=n&&n.indexOf(D(0))<0?n:t.name;return i}function h(e){for(var t,n=arguments,i=1;i<n.length;++i)if(t=n[i])for(var a in t)e[a]=t[a];return e}function m(e){var t=_&&10>_,n=/^\s*<([\w-]+)/.exec(e),i=n?n[1].toLowerCase():"",a="th"===i||"td"===i?"tr":"tr"===i?"tbody":"div",o=y(a);return o.stub=!0,t&&("optgroup"===i?E(o,e):"option"===i?x(o,e):"div"!==a?N(o,e,i):t=0),t||(o.innerHTML=e),o}function v(e,t){if(e)if(t(e)===!1)v(e.nextSibling,t);else for(e=e.firstChild;e;)v(e,t),e=e.nextSibling}function b(e){for(;e;){if(e.inStub)return!0;e=e.parentNode}return!1}function y(e){return document.createElement(e)}function T(e,t){return e.replace(/<(yield)\/?>(<\/\1>)?/gim,t||"")}function w(e,t){return(t||document).querySelectorAll(e)}function C(e){function t(){}return t.prototype=e,new t}function k(e,t,n){c(e.attributes,function(i){if(!e._visited&&("id"===i.name||"name"===i.name)){e._visited=!0;var a,o=i.value;if(~n.indexOf(o))return;a=t[o],a?O(a)?a.push(e):t[o]=[a,e]:t[o]=e}})}function N(e,t,n){var i,a=y("div"),o=/td|th/.test(n)?3:2;for(a.innerHTML="<table>"+t+"</table>",i=a.firstChild;o--;)i=i.firstChild;e.appendChild(i)}function x(e,t){var n=y("option"),i=/value=[\"'](.+?)[\"']/,a=/selected=[\"'](.+?)[\"']/,o=/each=[\"'](.+?)[\"']/,r=/if=[\"'](.+?)[\"']/,s=/>([^<]*)</,l=t.match(i),u=t.match(a),c=t.match(s),d=t.match(o),p=t.match(r);n.innerHTML=c?c[1]:t,l&&(n.value=l[1]),u&&n.setAttribute("riot-selected",u[1]),d&&n.setAttribute("each",d[1]),p&&n.setAttribute("if",p[1]),e.appendChild(n)}function E(e,t){var n=y("optgroup"),i=/label=[\"'](.+?)[\"']/,a=/^<([^>]*)>/,o=/^<([^ \>]*)/,r=t.match(i),s=t.match(a),l=t.match(o),u=t;if(s){var c=t.slice(s[1].length+2,-l[1].length-3).trim();u=c}if(r&&n.setAttribute("riot-label",r[1]),u){var d=y("div");x(d,u),n.appendChild(d.firstChild)}e.appendChild(n)}function A(e){return R[e.getAttribute($)||e.tagName.toLowerCase()]}function S(e){if(V=V||y("style"),document.head){if(V.styleSheet?V.styleSheet.cssText+=e:V.innerHTML+=e,!V._rendered)if(V.styleSheet)document.body.appendChild(V);else{var t=w("style[type=riot]")[0];t?(t.parentNode.insertBefore(V,t),t.parentNode.removeChild(t)):document.head.appendChild(V)}V._rendered=!0}}function L(e,t,n){var i=R[t],a=e._innerHTML=e._innerHTML||e.innerHTML;return e.innerHTML="",i&&e&&(i=new r(i,{root:e,opts:n},a)),i&&i.mount?(i.mount(),H.push(i),i.on("unmount",function(){H.splice(H.indexOf(i),1)})):void 0}var M={version:"v2.2.1",settings:{}},j="string",P="object",O=Array.isArray||function(){var e=Object.prototype.toString;return function(t){return"[object Array]"===e.call(t)}}(),_=function(e){return 0|(e&&e.document||{}).documentMode}(e);M.observable=function(e){e=e||{};var t={},n=0;return e.on=function(i,a){return d(a)&&(a._id="undefined"==typeof a._id?n++:a._id,i.replace(/\S+/g,function(e,n){(t[e]=t[e]||[]).push(a),a.typed=n>0})),e},e.off=function(n,i){return"*"==n?t={}:n.replace(/\S+/g,function(e){if(i)for(var n,a=t[e],o=0;n=a&&a[o];++o)n._id==i._id&&(a.splice(o,1),o--);else t[e]=[]}),e},e.one=function(t,n){function i(){e.off(t,i),n.apply(e,arguments)}return e.on(t,i)},e.trigger=function(n){for(var i,a=[].slice.call(arguments,1),o=t[n]||[],r=0;i=o[r];++r)i.busy||(i.busy=1,i.apply(e,i.typed?[n].concat(a):a),o[r]!==i&&r--,i.busy=0);return t.all&&"all"!=n&&e.trigger.apply(e,["all",n].concat(a)),e},e},M.mixin=function(){var e={};return function(t,n){return n?void(e[t]=n):e[t]}}(),function(e,t,n){function i(){return s.href.split("#")[1]||""}function a(e){return e.split("/")}function o(e){e.type&&(e=i()),e!=r&&(l.trigger.apply(null,["H"].concat(a(e))),r=e)}if(n){var r,s=n.location,l=e.observable(),u=n,c=!1,d=e.route=function(e){e[0]?(s.hash=e,o(e)):l.on("H",e)};d.exec=function(e){e.apply(null,a(i()))},d.parser=function(e){a=e},d.stop=function(){c&&(u.removeEventListener?u.removeEventListener(t,o,!1):u.detachEvent("on"+t,o),l.off("*"),c=!1)},d.start=function(){c||(u.addEventListener?u.addEventListener(t,o,!1):u.attachEvent("on"+t,o),c=!0)},d.start()}}(M,"hashchange",e);var V,D=function(e){var t,n,i,a=/[{}]/g;return function(o){var r=M.settings.brackets||e;return t!==r&&(t=r,i=r.split(" "),n=i.map(function(e){return e.replace(/(?=.)/g,"\\")})),o instanceof RegExp?r===e?o:new RegExp(o.source.replace(a,function(e){return n[~~("}"===e)]}),o.global?"g":""):i[o]}}("{ }"),I=function(){function t(e,t){return e=(e||D(0)+D(1)).replace(D(/\\{/g),"￰").replace(D(/\\}/g),"￱"),t=a(e,o(e,D(/{/),D(/}/))),new Function("d","return "+(t[0]||t[2]||t[3]?"["+t.map(function(e,t){return t%2?n(e,!0):'"'+e.replace(/\n/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':n(t[1])).replace(/\uFFF0/g,D(0)).replace(/\uFFF1/g,D(1))+";")}function n(e,t){return e=e.replace(/\n/g," ").replace(D(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w- "']+ *:/.test(e)?"["+o(e,/["' ]*[\w- ]+["' ]*:/,/,(?=["' ]*[\w- ]+["' ]*:)|}|$/).map(function(e){return e.replace(/^[ "']*(.+?)[ "']*: *(.+?),? *$/,function(e,t,n){return n.replace(/[^&|=!><]+/g,i)+'?"'+t+'":"",'})}).join("")+'].join(" ").trim()':i(e,t)}function i(t,n){return t=t.trim(),t?"(function(v){try{v="+(t.replace(s,function(t,n,i){return i?"(d."+i+"===undefined?"+("undefined"==typeof e?"global.":"window.")+i+":d."+i+")":t})||"x")+"}catch(e){}finally{return "+(n===!0?'!v&&v!==0?"":v':"v")+"}}).call(d)":""}function a(e,t){var n=[];return t.map(function(t,i){i=e.indexOf(t),n.push(e.slice(0,i),t),e=e.slice(i+t.length)}),n.concat(e)}function o(e,t,n){var i,a=0,o=[],r=new RegExp("("+t.source+")|("+n.source+")","g");return e.replace(r,function(t,n,r,s){!a&&n&&(i=s),a+=n?1:-1,a||null==r||o.push(e.slice(i,s+r.length))}),o}var r={},s=/(['"\/]).*?[^\\]\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function *\()|([a-z_$]\w*)/gi;return function(e,n){return e&&(r[e]=r[e]||t(e))(n)}}(),H=[],R={},$="riot-tag";M.tag=function(e,t,n,i,a){return d(i)&&(a=i,/^[\w\-]+\s?=/.test(n)?(i=n,n=""):i=""),n&&(d(n)?a=n:S(n)),R[e]={name:e,tmpl:t,attrs:i,fn:a},e},M.mount=function(e,t,n){function i(e){var t="";return c(e,function(e){t+=', *[riot-tag="'+e.trim()+'"]'}),t}function a(){var e=Object.keys(R);return e+i(e)}function o(e){if(e.tagName){t&&!e.getAttribute($)&&e.setAttribute($,t);var i=L(e,t||e.getAttribute($)||e.tagName.toLowerCase(),n);i&&l.push(i)}else e.length&&c(e,o)}var r,s,l=[];if(typeof t===P&&(n=t,t=0),typeof e===j?("*"===e?e=s=a():e+=i(e.split(",")),r=w(e)):r=e,"*"===t){if(t=s||a(),r.tagName)r=w(t,r);else{var u=[];c(r,function(e){u.push(w(t,e))}),r=u}t=0}return r.tagName?o(r):c(r,o),l},M.update=function(){return c(H,function(e){e.update()})},M.mountTo=M.mount,M.util={brackets:D,tmpl:I},"object"==typeof exports?module.exports=M:"function"==typeof define&&define.amd?define(function(){return M}):e.riot=M}("undefined"!=typeof window?window:void 0);var utils={httpGet:function(e,t,n,i){var a=new XMLHttpRequest,e=utils.concatParams(e,t);a.open("GET",e,!0),a.send(null),a.onreadystatechange=function(){if(4===a.readyState&&(i&&"function"==typeof i&&i(),200===a.status)){var e=a.responseText;try{if("string"==typeof e)var t=JSON.parse(e);else var t=e}catch(o){alert("解析错误")}n(t)}}},httpPost:function(e,t,n,i){var a=new XMLHttpRequest;a.open("POST",e,!0),a.setRequestHeader("Content-type","application/json"),a.send(t),a.onreadystatechange=function(){if(4===a.readyState)if(i&&"function"==typeof i&&i(),200===a.status){try{var e=JSON.parse(a.responseText)}catch(t){console.log("解析错误")}n(e)}else console.log("网络错误")}},jsonp:function(e,t,n){var i=Date.now(),a=document.createElement("script"),o=document.getElementsByTagName("head")[0],e=utils.concatParams(e,t);if(t.callback)var r=e,s=t.callback;else{if(e.match(/\?/))var r=e+"&callback=jsonpCallback"+i;else var r=e+"?callback=jsonpCallback"+i;var s="jsonpCallback"+i}a.src=r,o.appendChild(a),window[s]=function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){}n(e)},a.onerror=function(){console.log("jsonp error")},a.onload=function(){o.removeChild(a)}},htmlEncode:function(e){var t=document.createElement("div");return t.innerHTML=e,t.innerText},concatParams:function(e,t){if(e.match(/\?/))var n="&";else var n="?";for(i in t)n=n+i+"="+t[i]+"&";return n=n.replace(/&$/,""),e+n},setCookie:function(e,t,n,i){var a=new Date,i=i||"/";a.setTime(a.getTime()+n),document.cookie=e+"="+escape(t)+";path="+i+";expires="+a.toGMTString()},transBytes:function(e){var t=["B","KB","MB","GB","TB"];if(0==e)return"n/a";var n=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return 0==n?e+t[n]:(e/Math.pow(1024,n)).toFixed(1)+t[n]},transTimes:function(e){var e=parseInt(e,10),t=new Date(1e3*e),n=(new Date).getTime()/1e3,i=n-e;if(86400>i)return t.getHours()+":"+t.getMinutes();if(i>86400&&172800>i)return"昨天";if(i>172800){var a=(t.getFullYear()+"-").substring(2),o=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",r=t.getDate()<10?"0"+t.getDate():t.getDate();return a+o+r}},hasClass:function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){e.className.trim(),this.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){if(utils.hasClass(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}},toggleClass:function(e,t){if(utils.hasClass(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}else e.className+=" "+t},insertAfter:function(e,t){var n=t.parentNode;n.lastChild==t?n.appendChild(e):n.insertBefore(e,t.nextSibling)},insertAfterText:function(e,t){var n=t.parentNode;if(n.lastChild==t)n.appendChild(e);else{var i=t.nextSibling;3===i.nodeType&&(i=i.nextSibling),n.insertBefore(e,i)}},isType:function(e){return function(t){return toString.call(t)==="[object "+e+"]"}},makeArray:function(){return Array.prototype.concat(obj)},extend:function(e,t){for(var n in t)e[n]||(e[n]=t[n])}};utils.extend(utils,{isArray:utils.isType("Array"),isObject:utils.isType("Object"),isFunction:utils.isType("Function"),isElement:function(e){return-1!==toString.call(e).indexOf("Element")}}),utils.extend(utils,{jsLoader:function(){function e(){return p++}function t(e){return e.match(/\.css\??/)}function n(t){this.uri=t,this.cid=e(),this.status=T}function i(e,t){return i.then(e,t).start(),i}function a(e){throw e}function o(e){if(e||f.length)for(var t=0;t<e.task.length;t++){var n=e.task[t];s(n,e)}}function r(e,t){var i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=e.uri,c.appendChild(i),i=null,e.status=v,n.resolve.call(t)}function s(e,i){function a(t){if("error"===t.type&&(e.status=y),"load"===t.type&&(e.status=v),n.resolve.call(i,e),e.changeStatus){e.changeStatus=!1;for(var a=0;a<w[e.cid].length;a++){var o=w[e.cid][a];n.resolve.call(o.resolver,o.js)}w[e.cid]=null}s.onload=s.onerror=null,c.removeChild(s),s=null}if(h(e.uri))try{e.uri(),e.status=v,n.resolve.call(i)}catch(o){e.status=y,n.resolve.call(i)}else{if(e.status===v)return void n.resolve.call(i);if(t(e.uri))return void r(e,i);if(e.status===b)return e.changeStatus=!0,w[e.cid]=w[e.cid]||[],void w[e.cid].push({js:e,resolver:i});e.status=b;var s=document.createElement("script");s.async=!0,s.src=e.uri,s.onload=s.onerror=a,c.appendChild(s)}}function l(e){var t=u(e);return n.get(t?t:e)}function u(e){return i.alias[e]}var c=document.head||document.getElementsByTagName("head")[0],d={},p=0,f=[],g=utils.isArray,h=utils.isFunction,m=utils.makeArray,v="done",b="inprocess",y="rejected",T="pending",w={};return n.get=function(e){return d[e]||(d[e]=new n(e))},n.resolve=function(e){var t=this;if(t.status++,e&&e.status===y){var n=Error("Source: "+e.uri+" load failed");a(n)}t.status===t.task.length&&setTimeout(function(){t.callback&&t.callback(),t=null,o(f.shift())},7)},i.then=function(e,t){if(!e)return i;g(e)||(e=m(e));for(var n={task:[],callback:t,status:0},a=0;a<e.length;a++)n.task.push(l(e[a]));return f.push(n),i},i.start=function(){return o(f.shift()),i},i.alias={},i}()});var EventCtrl=EC=riot.observable(),iToolkit={};iToolkit.methodRegister=function(e,t){for(var n in iToolkit)if(e===n)return;iToolkit[e]=t},iToolkit.tableExtend={},riot.tag("date-picker","<yield>",function(e){var t=this,n=t.root,i=t.opts.opts||t.opts,a=document.scripts,o="",r="";if(i.path)o=i.path;else{for(var s=0;s<a.length;s++)if(a[s].src&&/iToolkit_pc.min.js|iToolkit_pc.js/.test(a[s].src)){r=a[s].src.replace(/iToolkit_pc.min.js|iToolkit_pc.js/,"");break}o=r+"plugins/laydate/"}var l=i.theme?i.theme:"default";utils.jsLoader([o+"laydate.min.js",o+"/need/laydate.css",o+"/skins/"+l+"/laydate.css"],function(){for(var e=0;e<n.children.length;e++){var i=n.children[e];i.attributes.pTrigger&&(t.pTrigger=i),i.attributes.media&&(t.media=i)}t.resolve(),t.update()}),this.resolve=function(){if(!t.pTrigger&&!t.media)throw"media and pTrigger property was not found in the element";return t.pTrigger===t.media&&(i.elem=i.pTrigger=t.media),"undefined"==typeof t.pTrigger&&(i.elem=t.media),t.pTrigger&&t.media&&t.pTrigger!==t.media&&(i.pTrigger=t.pTrigger,i.elem=t.media),t.pTrigger&&!t.media&&(i.elem=t.pTrigger,i.justChoose=!0),i.pTrigger?void(i.pTrigger.onclick=function(e){laydate(i)}):void laydate(i)}.bind(this)}),riot.tag("dropdown",'<yield> <div class="r-dropdown">{ title }</div> <ul class="r-downdown-menu"> <li class="r-dropdown-list" each="{ data }"><a href="{ link|\'javascript:void(0)\' }">{ name }</a></li> </ul>',function(e){{var t=this;t.root,t.opts.opts||t.opts}}),riot.tag("editable-link",'<a href="javascript:void(0);" if="{ !editable }" onclick="{ open }">{ value }</a> <super-form if="{ editable }" action="{ action }" opts="{ formOpts }"> <input type="text" value="{ parent.value }" name="{ parent.name }" class="editable-link-input"> <input type="submit" value="提交"> <button onclick="{ parent.close }">取消</button> </super-form>',function(e){var t=this;t.editlink=!1;var n=t.root,i=t.opts.opts||t.opts;t.on("mount",function(){t.action=n.getAttribute("action"),t.value=n.getAttribute("text"),t.name=n.getAttribute("name"),t.update()}),this.open=function(e){t.editable=!0,t.update()}.bind(this),this.close=function(e){t.editable=!1,t.update()}.bind(this),t.formOpts={errCallback:function(){i.errCallback(),n.querySelector(".editable-link-input").value=t.value,t.editable=!1,t.update()},callback:function(e){i.callback(),t.value=n.querySelector(".editable-link-input").value,t.editable=!1,t.update()}}}),riot.tag("goto-top",'<div class="itoolkit-goto-top" show="{ showGotoTop }" onclick="{ gotoTop }"> <yield> <span class="itoolkit-goto-top-icon" show="{ showDefault }"><span class="icon-arrowUp"></span></span> </div>',"goto-top .itoolkit-goto-top{ display: block; position: fixed; bottom: 50px; right: 40px; height: 60px; width: 60px; z-index: 10000; text-align: center; opicity: 0.5; cursor: pointer; } goto-top .itoolkit-goto-top .itoolkit-goto-top-icon{ font-size: 3em; margin: auto; float: none; }",function(e){var t=this;t.config=t.opts.opts||t.opts;var n=window.screen.availHeight,i=t.root;t.on("mount",function(){t.root.querySelector(".itoolkit-goto-top").style.bottom=t.config.bottom,t.root.querySelector(".itoolkit-goto-top").style.right=t.config.right,"itoolkit-goto-top-icon"===i.querySelector(".itoolkit-goto-top").firstElementChild.className&&(t.showDefault=!0),window.addEventListener("scroll",t.controlGotoTop)}),t.controlGotoTop=function(){var e=document.body;e.scrollTop>n&&!t.showGotoTop?(t.showGotoTop=!0,t.update()):e.scrollTop<n&&t.showGotoTop&&(t.showGotoTop=!1,t.update())},this.gotoTop=function(e){var t=document.body.scrollTop/100*16,n=setInterval(function(){document.body.scrollTop=document.body.scrollTop-t,document.body.scrollTop<10&&clearInterval(n)},16)}.bind(this)}),riot.tag("loading",'<div class="{itoolkit-loading: true, default: default}" > <yield> </div>',"loading .itoolkit-loading { text-align: center; }",function(e){{var t=this;t.opts.opts||t.opts}t["default"]=!0,t.on("mount",function(){var e=t.root.parentNode,n=window.getComputedStyle(e,null).position;"static"===n&&(e.style.position="relative"),t.childDom=t.root.getElementsByClassName("itoolkit-loading")[0],t.childDom.innerHTML.trim()&&(t["default"]=!1,t.update());var i=parseInt(window.getComputedStyle(t.childDom,null).height.replace("px",""),10);t.root.style.marginTop="-"+i/2+"px"}),t.root.show=function(){t.childDom&&(t.childDom.style.display="block")},t.root.hide=function(){t.childDom&&(t.childDom.style.display="none")}}),riot.tag("modal",'<div class="itoolkit-modal-dialog" riot-style="width:{width}; height:{height}"> <div class="itoolkit-modal-title"> <span>{ title }</span> <div class="itoolkit-modal-close-wrap" onclick="{ close }"> <div class="itoolkit-modal-close"></div> </div> </div> <div class="itoolkit-modal-container"> <yield> </div> </div>',function(e){{var t=this,n=t.opts.opts||t.opts;t.root}for(i in n)t[i]=n[i];t.width=n.width||600,t.height=n.height||"auto",t.on("mount",function(){var e=t.root.querySelector(".itoolkit-modal-container"),i=t.root.querySelector(".itoolkit-modal-title"),a=parseInt(window.getComputedStyle(i,null).height.replace("px",""));n.height&&(e.style.height=t.height-a-2+"px")}),this.close=function(e){t.root.style.display="none",t.onClose&&t.onClose()}.bind(this),document.querySelector("[modal-open-target='"+t.root.id+"']")&&(document.querySelector("[modal-open-target='"+t.root.id+"']").onclick=function(){t.root.style.display="block",t.onOpen&&t.onOpen()}),t.root.open=function(){t.root.style.display="block",t.onOpen&&t.onOpen()},t.root.close=function(){t.root.style.display="none",t.onClose&&t.onClose()},t.root.loadData=function(e,n){n=n||"data",t[n]=e,t.update()}}),riot.tag("paginate",'<div onselectstart="return false" ondragstart="return false"> <div class="paginate"> <li onclick="{ goFirst }">«</li> <li onclick="{ goPrev }">‹</li> </div> <ul class="paginate"> <li each="{ pages }" onclick="{ parent.changePage }" class="{ active: parent.currentPage == page }">{ page }</li> </ul> <div class="paginate"> <li onclick="{ goNext }">›</li> <li onclick="{ goLast }">»</li> </div> <div class="paginate"> <form onsubmit="{ redirect }"> <span class="redirect" if="{ redirect }">跳转到<input name="page" riot-type={"number"} style="width: 40px;" min="1" max="{ pageCount }">页 </span> <span class="page-sum" if="{ showPageCount }"> 共<em>{ pageCount }</em>页 </span> <span class="item-sum" if="{ showItemCount }"> <em>{ count }</em>条 </span> <input type="submit" style="display: none;"> </form> </div> </div>',function(e){var t=this,n=t.root,a=t.opts.opts||t.opts;if(t.count=a.count||0,t.pagesize=a.pagesize||20,t.pageCount=a.pageCount||Math.ceil(t.count/t.pagesize)||1,t.currentPage=a.currentPage||1,t.url=a.url||"",t.showNumber=a.showNumber||5,t.redirect=a.redirect||!0,t.showPageCount=a.showPageCount||!0,t.showItemCount=a.showItemCount||!0,t.needInit=a.needInit||!1,n.addCount=function(e){{var n=t.count+e;t.pageCount}if(t.count=0>n?0:n,t.pageCount=Math.ceil(t.count/t.pagesize)||1,t.currentPage=t.currentPage>t.pageCount?t.pageCount:t.currentPage,t.pageCount<=t.showNumber){t.pages=[];for(var i=0;i<t.pageCount;i++)t.pages.push({page:i+1})}t.needInit&&a.callback(t.currentPage),t.pageChange(t.currentPage),t.update()},t.needInit&&a.callback(t.currentPage),t.pages=[],t.pageCount<t.showNumber+1)for(i=0;i<t.pageCount;i++)t.pages.push({page:i+1});else{for(i=0;i<t.showNumber;i++)t.pages.push({page:i+1});t.pages.push({page:"..."})}t.update(),this.goFirst=function(e){t.pageChange(1)}.bind(this),this.goPrev=function(e){t.currentPage>1&&t.pageChange(t.currentPage-1)}.bind(this),this.goNext=function(e){t.currentPage<t.pageCount&&t.pageChange(t.currentPage+1)}.bind(this),this.goLast=function(e){t.pageChange(t.pageCount)}.bind(this),this.redirect=function(e){var n=t.page.value;parseInt(n,10)&&parseInt(n,10)<t.pageCount+1&&t.pageChange(parseInt(n,10))}.bind(this),this.changePage=function(e){var n=e.item.page;return"string"==typeof n?!1:void t.pageChange(n)}.bind(this),t.pageChange=function(e){if(t.currentPage!=e&&(t.currentPage=e,a.callback(e)),t.currentPage>Math.ceil(t.showNumber/2)&&t.pageCount>t.showNumber){if(t.pages=[],t.pageCount-t.currentPage>2)var n=t.currentPage-Math.ceil(t.showNumber/2),o=t.currentPage+Math.floor(t.showNumber/2);else var o=t.pageCount,n=t.pageCount-t.showNumber;for(i=n;i<o;i++)t.pages.push({page:i+1}),t.update()}else if(t.currentPage<Math.ceil(t.showNumber/2)+1&&t.pageCount>t.showNumber){for(t.pages=[],i=0;i<t.showNumber;i++)t.pages.push({page:i+1});t.pages.push({page:"..."})}}}),riot.tag("select-box",'<div class="r-select" onclick="{ clicked }">{ placeholder }</div> <ul class="r-select-body" hide="{ hide }"> <li each="{ data }" index="{ index }" value="{ value }" class="r-select-item { selected }" onclick="{ parent.clickItem }">{ innerText }</li> </ul> <div style="display:none" class="inputHide"></div>',function(e){var t=this,n=t.root;t.config=t.opts.opts||t.opts,t.data=[],t.placeholder=t.config.placeholder,t.callback=t.config.callback,t.name=t.config.name,t.value=[],t.prevNode=null,n.getValue=function(){return t.value},t.hide=!0,this.clicked=function(e){t.hide=!1,t.update()}.bind(this),this.updateValue=function(e){for(var n=0;n<t.data.length;n++)t.data[n].selected&&(t.value.push(t.data[n].value),t.placeholder.push(t.data[n].innerText));t.value.length==t.size&&(t.hide=!0),t.placeholder=t.placeholder.join(","),t.prevNode=e,t.callback&&t.callback(t),t.update()}.bind(this),this.clickItem=function(e){var n=e.target||e.srcElement,i=+n.getAttribute("index");return t.value.length=0,t.placeholder=[],t.mutiple?(t.data[i].selected=t.data[i].selected?"":"selected",void t.updateValue(null)):(t.prevNode&&(t.data[+t.prevNode.getAttribute("index")].selected=""),t.data[i].selected="selected",void t.updateValue(n))}.bind(this),t.one("mount",function(){for(var e=0;e<t.config.data.length;e++){var n=t.config.data[e];n.selected="",n.index=e,t.data.push(n)}t.mutiple=t.config.mutiple||!1,t.size=t.mutiple?t.config.size?t.config.size:t.data.length:1,t.update()})}),riot.tag("side-list",'<ul > <li each="{ data }"> <img riot-src="{ logoUrl }" if="{ isLogo }"> <span>{ name }</span> </li> </ul>',function(e){}),riot.tag("slide","",function(e){}),riot.tag("super-div","<yield>","super-div{ display: block; }",function(e){var t=this,n=t.opts.opts||t.opts,a=t.root;for(i in n)t[i]=n[i];t.getData=function(e){var e=e||{};if(a.getAttribute("data-get"))var n="httpGet";else if(a.getAttribute("data-jsonp"))var n="jsonp";utils[n](t.superDivUrl,e,function(e){for(i in e)t.data={},t.data[i]=e[i];t.update()})},t.on("mount",function(){a.style.display="block",t.superDivUrl=a.getAttribute("data-get")||a.getAttribute("data-jsonp"),t.superDivUrl&&t.getData(n.params)}),t.loadData=a.loadData=function(e,n){n=n||"data",t[n]=e,t.update()},t.reload=a.reload=function(){t.superDivUrl?t.getData(n.params):t.update()}}),riot.tag("super-form",'<form onsubmit="{ submit }" > <yield> </form>',function(e){function t(e,t,n,i,a,o){var r=isNaN(e),s=isNaN(t),u=i.length;r||s?(r||(e>u?(a.push(o),l.onValidRefuse(n,l.minWarning(e))):l.onValidPass(n,l.successTips)),s||(u>t?(a.push(o),l.onValidRefuse(n,l.maxWarning(t))):l.onValidPass(n,l.successTips)),s&&r&&l.onValidPass(n,l.successTips)):u>t||e>u?(a.push(o),l.onValidRefuse(n,l.bpWarning(e,t))):l.onValidPass(n,l.successTips)}function n(e,t,n,i,a,o){var r=isNaN(e),s=isNaN(t),i=+i;r||s?(r||(e>i?(a.push(o),l.onValidRefuse(n,l.minNumWarning(e))):l.onValidPass(n,l.successTips)),s||(i>t?(a.push(o),l.onValidRefuse(n,l.maxNumWarning(t))):l.onValidPass(n,l.successTips)),s&&r&&l.onValidPass(n,l.successTips)):i>t||e>i?(a.push(o),l.onValidRefuse(n,l.numBpWarning(e,t))):l.onValidPass(n,l.successTips)}function a(e){s([],this)}function o(e){return toString.call(e).match(/\ (.*)\]/)[1]}function r(e){var t=o(e);return"Null"===t||"Undefined"===t||"Function"===t?e:new window[t](e)}function s(e,t){var t=t,n=t.getAttribute("valid"),i=t.getAttribute("customValid"),a=t.getAttribute("vr"),o=t.getAttribute("orient"),r=parseInt(t.getAttribute("max"),10),s=parseInt(t.getAttribute("min"),10),c=t.type,d=t.getAttribute("allowEmpty"),g=t.value,h=t.name,m=t;if(null!==d||!isNaN(r)||!isNaN(s)||null!==n||null!==i||null!==a||null!==o){if(d&&(""===g||"string"!=typeof g))return void l.onValidPass(m,l.successTips);if(h&&n){if("email"===n)g.match(/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/)?l.onValidPass(m,l.successTips):(e.push(h),l.onValidRefuse(m,l.emailWarning));else if("mobile"===n)g.match(/^1[3|4|5|8][0-9]\d{4,8}$/)?l.onValidPass(m,l.successTips):(e.push(h),l.onValidRefuse(m,l.mobileWarning));else if("url"===n)g.match(/((http|ftp|https|file):\/\/([\w\-]+\.)+[\w\-]+(\/[\w\u4e00-\u9fa5\-\.\/?\@\%\!\&=\+\~\:\#\;\,]*)?)/)?l.onValidPass(m,l.successTips):(e.push(h),l.onValidRefuse(m,l.urlWarning));else if("present"===n)g=g.replace(" ",""),g.length?f("string").handler(s,r,m,g,e,h):(e.push(h),l.onValidRefuse(m,l.presentWarning));else if(n.match(/^\/\S+\/$/)){n=n.replace(/^\//,""),n=n.replace(/\/$/,"");var v=new RegExp(n);v.test(g)?f("string").handler(s,r,m,g,e,h):(e.push(h),l.onValidRefuse(m,l.regWarning))}else if(p[n.toUpperCase()]){var v=p[n.toUpperCase()];v.test(g)?f("number").handler(s,r,m,g,e,h):(e.push(h),l.onValidRefuse(m,l.numWarning))}}else if(h&&!n)if(i){if(window[i]){var v=window[i].regExp,b=window[i].message||l.regWarning;v&&v.test(g)?f("string").handler(s,r,m,g,e,h):(e.push(h),l.onValidRefuse(m,b))}}else"text"===c&&f("string").handler(s,r,m,g,e,h);if(o){var y=u.querySelector(o);if(t===y||!y)return;t=y,a=t.getAttribute("vr")}if(!e.length&&a){var T=a.split("::"),w=T[0],C=T[1]?T[1].split(","):void 0,k=!1;try{iToolkit[w]&&(k=iToolkit[w].apply(t,C))}catch(N){throw k=!1,N}k||e.push("fail")}}}var l=this,u=l.root,c=l.opts.opts||l.opts,d=["insertTip","ajaxSubmit","submit","removeTips","insertTip","removeTip","loadData","getData","setData"],p={NON_NEGATIVE_INT:/^0$|^-[1-9]\d*$/,POSITIVE_INT:/^[1-9]\d*$/,NON_POSITIVE_INT:/^[1-9]\d*$|^0$/,NEGATIVE_INT:/^-[1-9]\d*$/,INT:/^-?[1-9]\d*$|^0$/,NON_NEGATIVE_FLOAT:/^(\d)(\.\d+)?$|^([1-9]\d*)(\.\d+)?$|^0$/,POSITIVE_FLOAT:/^(\d)(\.\d+)?$|^([1-9]\d*)(\.\d+)?$/,NON_POSITIVE_FLOAT:/^(-\d)(\.\d+)?$|^(-[1-9]\d*)(\.\d+)?$|^0$/,NEGATIVE_FLOAT:/^(-\d)(\.\d+)?$|^(-[1-9]\d*)(\.\d+)?$/,FLOAT:/^(-?\d)(\.\d+)?$|^(-?[1-9]\d*)(\.\d+)?$|^0$/};l.presentWarning="必填",l.emailWarning="邮箱格式错误",l.mobileWarning="手机格式错误",l.urlWarning="网址格式错误",l.successTips="通过",l.regWarning="字段不符合验证规则",l.numWarning="数字格式错误",l.passClass=c.passClass||"valid-pass",l.failedClass=c.failedClass||"valid-failed";var f=function(e){return{handler:function(i,a,o,r,s,l){switch(e){case"number":return n(i,a,o,r,s,l);case"string":default:return t(i,a,o,r,s,l)}}}};l.one("mount",function(){if(u.style.display="block",c.realTime&&c.valid)for(var e=l.root.getElementsByTagName("form")[0].elements,t=0,n=e.length;n>t;t++){var i=e[t].type;("submit"!==i||"button"!==i)&&(e[t].addEventListener("input",a,!1),("checkbox"===i||"radio"===i)&&e[t].addEventListener("change",a,!1),e[t].addEventListener("input",a,!1))}}),u.loadData=function(e,t){
if(utils.isObject(e))for(var n in e)e[n]=r(e[n]);else e=r(e);t=t||"data",l[t]=e,l.update()},u.setData=function(e,t){l.data[t]=r(e),l.update()},l.checkExistKey=function(e,t,n){if(e.hasOwnProperty(t))if(utils.isArray(e[t]))e[t].push(n);else{var i=[];i.push(e[t]),i.push(n),e[t]=i}else e[t]=n},l.getData=u.getData=function(){for(var e=l.root.getElementsByTagName("form")[0].elements,t={},n=0;n<e.length;n++)if(e[n].name)if("SELECT"===e[n].tagName){var i=e[n].selectedOptions;for(j=0;j<i.length;j++)value=i[j].value,l.checkExistKey(t,e[n].name,encodeURIComponent(value))}else"checkbox"===e[n].type||"radio"===e[n].type?e[n].checked&&(value=e[n].value,l.checkExistKey(t,e[n].name,encodeURIComponent(value))):(value=e[n].value,l.checkExistKey(t,e[n].name,encodeURIComponent(value)));return t};for(i in c)d.indexOf(i)<0&&(l[i]=c[i]);l.data=c.data,l.submitingText=c.submitingText||"提交中...",void 0===c.valid&&(c.valid=!0),l.maxWarning=c.maxWarning||function(e){return"不得超过"+e+"个字符"},l.minWarning=c.minWarning||function(e){return"不得小于"+e+"个字符"},l.bpWarning=c.bpWarning||function(e,t){return"只允许"+e+"-"+t+"个字符"},l.minNumWarning=c.minNumWarning||function(e){return"不得小于"+e},l.maxNumWarning=c.maxNumWarning||function(e){return"不得大于"+e},l.numBpWarning=c.numBpWarning||function(e,t){return"输入数字应在"+e+"-"+t+"之间"},l.removeTips=u.removeTips=function(){function e(){for(a=0;a<i.length;a++)i[a].parentNode.removeChild(i[a]),i.length&&e()}var t=l.root,n=t.getElementsByTagName("form")[0].elements,i=t.getElementsByClassName("tip-container");i&&i.length&&e();for(var a=0;a<n.length;a++)utils.removeClass(n[a],l.passClass),utils.removeClass(n[a],l.failedClass)},l.removeTip=u.removeTip=function(e){var t=e.nextElementSibling;t&&t.className.match(/tip-container/)&&e.parentNode.removeChild(t),utils.removeClass(e,l.passClass),utils.removeClass(e,l.failedClass)},l.insertTip=u.insertTip=function(e,t,n){var i=e.nextElementSibling;i&&i.className.match(/tip-container/)&&e.parentNode.removeChild(i);var a=document.createElement("span");a.className=n,a.innerHTML=t,utils.insertAfterText(a,e)},l.onValidRefuse=u.onValidRefuse=c.onValidRefuse||function(e,t){l.insertTip(e,t,"tip-container"),utils.removeClass(e,l.passClass),utils.addClass(e,l.failedClass)},l.onValidPass=u.onValidPass=c.onValidPass||function(e,t){l.insertTip(e,t,"tip-container success"),utils.removeClass(e,l.failedClass),utils.addClass(e,l.passClass)},l.ajaxSubmit=function(e,t){for(var n="",i=0;i<e.length;i++){if(e[i].name)if("SELECT"===e[i].tagName){var a=e[i].selectedOptions;for(j=0;j<a.length;j++)value=a[j].value,n+=e[i].name+"="+encodeURIComponent(value)+"&"}else"checkbox"===e[i].type||"radio"===e[i].type?e[i].checked&&(value=e[i].value,n+=e[i].name+"="+encodeURIComponent(value)+"&"):(value=e[i].value,n+=e[i].name+"="+encodeURIComponent(value)+"&");if("submit"===e[i].type)if("BUTTON"===e[i].tagName){var o=e[i],r=o.innerHTML;o.disabled="disabled",o.innerHTML=l.submitingText}else{var o=e[i],r=o.value;o.disabled="disabled",o.value=l.submitingText}}var s=new XMLHttpRequest;s.open("POST",t,!0),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.send(n),s.onreadystatechange=function(){if(4===s.readyState)if(l.removeTips(),"BUTTON"===o.tagName?o.innerHTML=r:o.value=r,o.disabled=!1,c.complete&&"function"==typeof c.complete&&c.complete(),200===s.status)try{var e=JSON.parse(s.responseText);c.callback&&c.callback(e),EC.trigger("submit_success",e)}catch(t){throw new Error(t.message)}else c.errCallback&&c.errCallback(n),EC.trigger("submit_error",n)}},this.submit=function(e){var t=[],n=l.root.getElementsByTagName("form")[0].elements,i=l.action||l.root.getAttribute("action"),a=i;if(c.valid)for(var o=0;o<n.length;o++)s(t,n[o]);if(!t.length)try{c.beforeSubmit&&c.beforeSubmit(t)}catch(e){t.push(e)}return t.length?!1:c.normalSubmit?(l.root.firstChild.setAttribute("action",i),!0):(e.preventDefault(),void l.ajaxSubmit(n,a))}.bind(this)}),riot.tag("tab",'<ul> <li each="{ data }" onclick="{ parent.toggle }" class="{ active: parent.currentIndex==index }">{ title }</li> </ul> <div class="tab-content"> { content } </div>',function(e){var t=this,n=t.opts.opts||t.opts;if(t.data=n.data,t.data.length>0)for(t.currentIndex=0,t.content=t.data[0].content,i=0;i<t.data.length;i++)t.data[i].index=i;this.toggle=function(e){t.content=e.item.content,t.currentIndex=e.item.index,t.update()}.bind(this)}),riot.tag("table-view",'<yield> <table class="{ config.class }"> <tr show="{ showHeader }"> <th each="{ cols }" riot-style="{ style }" hide="{ hide }">{ alias || name }</th> </tr> <tr each="{ row in rows }" > <td each="{ colkey, colval in parent.cols }" class="{ newline: parent.parent.config.newline, cut: parent.parent.config.cut }" title="{ parent.row[colkey.name] }" hide="{ colkey.hide }"> { parent.parent.drawcell(parent.row, this, colkey) } </td> </tr> </table>',function(e){var t=this,n=t.root;t.config=t.opts.opts||t.opts,t.showHeader=t.config.showHeader===!1?!1:!0,t.cols=[],t.rows=[],t.on("mount",function(){if(t.rows=t.config.data,n.children.length>1)for(i=0;i<n.children.length;i++){var e=n.children[i];if("rcol"===e.localName){var a="";void 0!=e.attributes.width&&(a="width: "+e.attributes.width.value);var o={inner:e.innerHTML,style:a,index:i,attrs:e.attributes,hide:!1};o.name=e.attributes.name?e.attributes.name.value:"",e.attributes.alias&&(o.alias=e.attributes.alias.value||""),t.cols.push(o)}}else for(i in t.rows[0]){var o={name:i,inner:"",style:a};t.cols.push(o)}t.update()}),t.compare=function(e,n){return e[t.orderkeyName]>n[t.orderkeyName]?1:e[t.orderkeyName]===n[t.orderkeyName]?0:-1},t.clearOrder=function(){t.ordered=!1,t.reversed=!1},n.loadData=function(e){t.clearOrder(),t.rows=e,t.update()},n.appendData=function(e){t.clearOrder(),t.rows.push(e),t.update()},n.clearData=function(e){t.clearOrder(),t.rows=[],t.update()},n.orderData=function(e){t.orderkeyName=e,t.ordered!==e&&(t.rows=t.reversed!==e?t.rows.sort(t.compare):t.rows.reverse(),t.ordered=e,t.reversed=!1,t.update())},n.reverseData=function(e){t.orderkeyName=e,t.reversed!==e&&(t.ordered!==e&&(t.rows=t.rows.sort(t.compare)),t.rows=t.rows.reverse(),t.ordered=!1,t.reversed=e,t.update())},n.deleteData=function(e,a){t.clearOrder();var e=e||"id";for(i=0;i<t.rows.length;i++)t.rows[i][e]===a&&(t.rows.splice(i,1),n.deleteData(e,a));return t.update(),n},n.hide=function(e){for(i=0;i<t.cols.length;i++)if(t.cols[i].name===e){t.cols[i].hide=!0;break}t.update()},n.show=function(e){for(i=0;i<t.cols.length;i++)if(t.cols[i].name===e){t.cols[i].hide=!1;break}t.update()},t.findNodes=function(e,n){for(var i=0;i<e.attributes.length;i++){var a=e.attributes[i].name,o=e.attributes[i].value;if("if"===a||"show"===a||"hide"===a){e.removeAttribute(a);var r=riot.util.tmpl(o,n);"hide"==a&&(r=!r),e.style.display=r?"":"none"}if("each"===a){e.removeAttribute(a);var s=riot.util.tmpl(o,n),l=e.parentNode;if(s&&utils.isArray(s)){var u=document.createComment("riot placeholder"),c=document.createDocumentFragment();for(l.insertBefore(u,e),i=0;i<s.length;i++){var d=document.createElement("tmp");d.innerHTML=riot.util.tmpl(e.outerHTML,s[i]),c.appendChild(d.firstChild)}l.removeChild(e),l.insertBefore(c,u)}}}if(e.hasChildNodes())for(var p=e.children,i=0;i<p.length;i++){var f=p.item(i);t.findNodes(f,n)}},this.drawcell=function(e,n,a){if(a.attrs.length)for(i in a.attrs)"function"!=typeof a.attrs[i]&&(a.attrs[i].name&&"class"!==a.attrs[i].name?n.root.setAttribute(a.attrs[i].name,a.attrs[i].value):a.attrs[i].name&&"class"==a.attrs[i].name&&utils.addClass(n.root,a.attrs[i].value));if(!a.inner)return e[a.name];var o=a.inner.replace(/&lt;%=/g,"{").replace(/%&gt;/g,"}").replace(/%>/g,"}").replace(/<%=/g,"{");for(i in iToolkit.tableExtend)e[i]="function"==typeof iToolkit.tableExtend[i]?iToolkit.tableExtend[i].bind(e):iToolkit.tableExtend[i];for(i in e)n[i]=e[i];n.root.innerHTML=o,t.findNodes(n.root,n),n.root.innerHTML=riot.util.tmpl(n.root.innerHTML,e)}.bind(this)}),riot.tag("tree",'<div class="tree-item-wrap" each="{ data }" onselectstart="return false" ondragstart="return false"> <input type="checkbox" onchange="{ parent.checkHandle }" if="{ parent.rootConfig.showCheck }"> <i class="{ tree-item-arrow: true, open: opened, empty: !children }" onclick="{ parent.toggle }"></i> <div onclick="{ parent.leftClick }" style="display: inline;"> <i class="tree-item-icon" if="{ !parent.children }"></i> <i class="tree-item-icon" if="{ parent.children }"></i> <div class="{ tree-item-name : true }" title="{ name }">{ name }</div>  </div> <ul class="tree-child-wrap" if="{ children }"> <tree data="{ children }" if="{ children }"></tree> </ul> </div>',function(e){var t=this;if(t.config=t.opts.opts||t.opts,t.dataHandle=function(e,n,i){var e=e||[],a=n||"id",o=i||"pid",r={};e.forEach(function(e){t.config.name&&(e.name=e[t.config.name]),r[e[a]]=e});var s=[];return e.forEach(function(e){var t=r[e[o]];t?(t.children||(t.children=[]),t.children.push(e)):s.push(e)}),s},t.config.handleData){var n=t.dataHandle(t.config.data);t.data=n}else t.data=t.config.data;t.rootConfig=t.config.root?t.config:t.parent.rootConfig||t.parent.parent.rootConfig,this.leftClick=function(e){if(t.rootConfig.folder&&e.item.children)e.item.opened=e.item.opened===!0?!1:!0;else{var n=t.rootConfig.onLeftClick;n&&n(e.item,e.target)}}.bind(this),this.checkHandle=function(e){var n=t.rootConfig.onCheck,i=t.rootConfig.onUnCheck;n&&e.target.checked&&n(e.item,e.target),i&&!e.target.checked&&i(e.item,e.target)}.bind(this),this.toggle=function(e){e.item.opened=e.item.opened===!0?!1:!0}.bind(this)});