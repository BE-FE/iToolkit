/**
 * iToolkit v1.0.0
 * Revised in 2016-01-15 20:29:25
 * Released under the ISC License.
 */

!function(t,e){"use strict";function n(t){var e=q(0),n=t.trim().slice(e.length).match(/^\s*(\S+?)\s*(?:,\s*(\S+))?\s+in\s+(.+)$/);return n?{key:n[1],pos:n[2],val:e+n[3]}:{val:t}}function i(t,e,n){var i={};return i[t.key]=e,t.pos&&(i[t.pos]=n),i}function o(t,e,o){f(t,"each");var a,r=v(t),l=t.outerHTML,u=!!K[r],c=K[r]||{tmpl:l},p=t.parentNode,d=document.createComment("riot placeholder"),m=[],h=g(t);p.insertBefore(d,t),o=n(o),e.one("premount",function(){p.stub&&(p=e.root),t.parentNode.removeChild(t)}).on("update",function(){var n=G(o.val,e);F(n)||(a=n?JSON.stringify(n):"",n=n?Object.keys(n).map(function(t){return i(o,t,n[t])}):[]);for(var l=document.createDocumentFragment(),f=m.length,g=n.length;f>g;)m[--f].unmount(),m.splice(f,1);for(f=0;g>f;++f){var v=!a&&o.key?i(o,n[f],f):n[f];m[f]?m[f].update(v):(m[f]=new s(c,{parent:e,isLoop:!0,hasImpl:u,root:V.test(r)?p:t.cloneNode(),item:v},t.innerHTML),m[f]._item=v,m[f].mount(),l.appendChild(m[f].root)),m[f]._item=v}p.insertBefore(l,d),h&&(e.tags[r]=m)}).one("updated",function(){var t=Object.keys(e);C(p,function(n){1!=n.nodeType||n.isLoop||n._looped||(n._visited=!1,n._looped=!0,S(n,e,t))})})}function a(t,e,n){C(t,function(t){if(1==t.nodeType){t.isLoop=t.isLoop||t.parentNode&&t.parentNode.isLoop||t.getAttribute("each")?1:0;var i=g(t);i&&!t.isLoop&&n.push(m(i,t,e)),t.isLoop||S(t,e,[])}})}function r(t,e,n){function i(t,e,i){if(e.indexOf(q(0))>=0){var o={dom:t,expr:e};n.push(b(o,i))}}C(t,function(t){var n=t.nodeType;if(3==n&&"STYLE"!=t.parentNode.tagName&&i(t,t.nodeValue),1==n){var a=t.getAttribute("each");return a?(o(t,e,a),!1):(p(t.attributes,function(e){var n=e.name,o=n.split("__")[1];return i(t,e.value,{attr:o||n,bool:o}),o?(f(t,n),!1):void 0}),g(t)?!1:void 0)}})}function s(t,n,i){function o(){var t=k&&C?f:v||f;p(A.attributes,function(e){g[e.name]=G(e.value,t)}),p(Object.keys(j),function(e){g[e]=G(j[e],t)})}function s(t){for(var e in N)typeof f[e]!==$&&(f[e]=t[e])}function l(){f.parent&&C&&p(Object.keys(f.parent),function(t){var e=!~B.indexOf(t)&&~M.indexOf(t);(typeof f[t]===$||e)&&(e||M.push(t),f[t]=f.parent[t])})}function u(t){if(p(S,function(e){e[t?"mount":"unmount"]()}),v){var e=t?"on":"off";C?v[e]("unmount",f.unmount):v[e]("update",f.update)[e]("unmount",f.unmount)}}var f=O.observable(this),g=L(n.opts)||{},m=z(t.tmpl),v=n.parent,C=n.isLoop,k=n.hasImpl,N=y(n.item),E=[],S=[],A=n.root,_=t.fn,P=A.tagName.toLowerCase(),j={},M=[];_&&A._tag&&A._tag.unmount(!0),this.isMounted=!1,A.isLoop=C,A._tag=this,this._id=I++,b(this,{parent:v,root:A,opts:g,tags:{}},N),p(A.attributes,function(t){var e=t.value;q(/{.*}/).test(e)&&(j[t.name]=e)}),m.innerHTML&&!/^(select|optgroup|table|tbody|tr|col(?:group)?)$/.test(P)&&(m.innerHTML=x(m.innerHTML,i)),this.update=function(t){t=y(t),l(),t&&typeof N===H&&(s(t),N=t),b(f,t),o(),f.trigger("update",t),c(E,f),f.trigger("updated")},this.mixin=function(){p(arguments,function(t){t=typeof t===D?O.mixin(t):t,p(Object.keys(t),function(e){"init"!=e&&(f[e]=d(t[e])?t[e].bind(f):t[e])}),t.init&&t.init.bind(f)()})},this.mount=function(){if(o(),_&&_.call(f,g),r(m,f,E),u(!0),(t.attrs||k)&&(T(t.attrs,function(t,e){A.setAttribute(t,e)}),r(f.root,f,E)),(!f.parent||C)&&f.update(N),f.trigger("premount"),C&&!k)f.root=A=m.firstChild;else{for(;m.firstChild;)A.appendChild(m.firstChild);A.stub&&(f.root=A=v.root)}!f.parent||f.parent.isMounted?(f.isMounted=!0,f.trigger("mount")):f.parent.one("mount",function(){w(f.root)||(f.parent.isMounted=f.isMounted=!0,f.trigger("mount"))})},this.unmount=function(t){var n,i=A,o=i.parentNode;if(o){if(v)n=h(v),F(n.tags[P])?p(n.tags[P],function(t,e){t._id==f._id&&n.tags[P].splice(e,1)}):n.tags[P]=e;else for(;i.firstChild;)i.removeChild(i.firstChild);t?o.removeAttribute("riot-tag"):o.removeChild(i)}f.trigger("unmount"),u(),f.off("*"),A._tag=null},a(m,this,S)}function l(e,n,i,o){i[e]=function(e){var a,r=o._item,s=o.parent;if(!r)for(;s&&!r;)r=s._item,s=s.parent;e=e||t.event;try{e.currentTarget=i,e.target||(e.target=e.srcElement),e.which||(e.which=e.charCode||e.keyCode)}catch(l){}e.item=r,n.call(o,e)===!0||/radio|check/.test(i.type)||(e.preventDefault&&e.preventDefault(),e.returnValue=!1),e.preventUpdate||(a=r?h(s):o,a.update())}}function u(t,e,n){t&&(t.insertBefore(n,e),t.removeChild(e))}function c(t,e){p(t,function(t,n){var i=t.dom,o=t.attr,a=G(t.expr,e),r=t.dom.parentNode;if(t.bool?a=a?o:!1:null==a&&(a=""),r&&"TEXTAREA"==r.tagName&&(a=(""+a).replace(/riot-/g,"")),t.value!==a){if(t.value=a,!o)return void(i.nodeValue=""+a);if(f(i,o),d(a))l(o,a,i,e);else if("if"==o){var s=t.stub,c=function(){u(s.parentNode,s,i)},p=function(){u(i.parentNode,i,s)};a?s&&(c(),i.inStub=!1,w(i)||C(i,function(t){t._tag&&!t._tag.isMounted&&(t._tag.isMounted=!!t._tag.trigger("mount"))})):(s=t.stub=s||document.createTextNode(""),i.parentNode?p():(e.parent||e).one("updated",p),i.inStub=!0)}else if(/^(show|hide)$/.test(o))"hide"==o&&(a=!a),i.style.display=a?"":"none";else if("value"==o)i.value=a;else if(A(o,j)&&o!=M)a&&i.setAttribute(o.slice(j.length),a);else{if(t.bool&&(i[o]=a,!a))return;typeof a!==H&&i.setAttribute(o,a)}}})}function p(t,e){for(var n,i=0,o=(t||[]).length;o>i;i++)n=t[i],null!=n&&e(n,i)===!1&&i--;return t}function d(t){return typeof t===W||!1}function f(t,e){t.removeAttribute(e)}function g(t){return t.tagName&&K[t.getAttribute(M)||t.tagName.toLowerCase()]}function m(t,e,n){var i,o=new s(t,{root:e,parent:n},e.innerHTML),a=v(e),r=h(n);return o.parent=r,i=r.tags[a],i?(F(i)||(r.tags[a]=[i]),~r.tags[a].indexOf(o)||r.tags[a].push(o)):r.tags[a]=o,e.innerHTML="",o}function h(t){for(var e=t;!g(e.root)&&e.parent;)e=e.parent;return e}function v(t){var e=g(t),n=t.getAttribute("name"),i=n&&n.indexOf(q(0))<0?n:e?e.name:t.tagName.toLowerCase();return i}function b(t){for(var e,n=arguments,i=1;i<n.length;++i)if(e=n[i])for(var o in e)t[o]=e[o];return t}function y(t){if(!(t instanceof s||t&&typeof t.trigger==W))return t;var e={};for(var n in t)~B.indexOf(n)||(e[n]=t[n]);return e}function C(t,e){if(t){if(e(t)===!1)return;for(t=t.firstChild;t;)C(t,e),t=t.nextSibling}}function T(t,e){for(var n,i=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;n=i.exec(t);)e(n[1].toLowerCase(),n[2]||n[3]||n[4])}function w(t){for(;t;){if(t.inStub)return!0;t=t.parentNode}return!1}function k(t){return document.createElement(t)}function x(t,e){return t.replace(/<(yield)\/?>(<\/\1>)?/gi,e||"")}function N(t,e){return(e||document).querySelectorAll(t)}function E(t,e){return(e||document).querySelector(t)}function L(t){function e(){}return e.prototype=t,new e}function S(t,e,n){if(!t._visited){var i,o=t.getAttribute("id")||t.getAttribute("name");o&&(n.indexOf(o)<0&&(i=e[o],i?F(i)?i.push(t):e[o]=[i,t]:e[o]=t),t._visited=!0)}}function A(t,e){return t.slice(0,e.length)===e}function _(t){if(!O.render){U||(U=k("style"),U.setAttribute("type","text/css"));var e=document.head||document.getElementsByTagName("head")[0];if(U.styleSheet?U.styleSheet.cssText+=t:U.innerHTML+=t,!U._rendered)if(U.styleSheet)document.body.appendChild(U);else{var n=E("style[type=riot]");n?(n.parentNode.insertBefore(U,n),n.parentNode.removeChild(n)):e.appendChild(U)}U._rendered=!0}}function P(t,e,n){var i=K[e],o=t._innerHTML=t._innerHTML||t.innerHTML;return t.innerHTML="",i&&t&&(i=new s(i,{root:t,opts:n},o)),i&&i.mount?(i.mount(),J.push(i),i.on("unmount",function(){J.splice(J.indexOf(i),1)})):void 0}var O={version:"v2.2.4",settings:{}},I=0,j="riot-",M=j+"tag",D="string",H="object",$="undefined",W="function",V=/^(?:opt(ion|group)|tbody|col|t[rhd])$/,B=["_item","_id","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],R=0|(t&&t.document||{}).documentMode,F=Array.isArray;O.observable=function(t){t=t||{};var e={},n=0;return t.on=function(i,o){return d(o)&&(typeof o.id===$&&(o._id=n++),i.replace(/\S+/g,function(t,n){(e[t]=e[t]||[]).push(o),o.typed=n>0})),t},t.off=function(n,i){return"*"==n?e={}:n.replace(/\S+/g,function(t){if(i)for(var n,o=e[t],a=0;n=o&&o[a];++a)n._id==i._id&&o.splice(a--,1);else e[t]=[]}),t},t.one=function(e,n){function i(){t.off(e,i),n.apply(t,arguments)}return t.on(e,i)},t.trigger=function(n){for(var i,o=[].slice.call(arguments,1),a=e[n]||[],r=0;i=a[r];++r)i.busy||(i.busy=1,i.apply(t,i.typed?[n].concat(o):o),a[r]!==i&&r--,i.busy=0);return e.all&&"all"!=n&&t.trigger.apply(t,["all",n].concat(o)),t},t},O.mixin=function(){var t={};return function(e,n){return n?void(t[e]=n):t[e]}}(),function(t,e,n){function i(){return s.href.split("#")[1]||""}function o(t){return t.split("/")}function a(t){t.type&&(t=i()),t!=r&&(l.trigger.apply(null,["H"].concat(o(t))),r=t)}if(n){var r,s=n.location,l=t.observable(),u=!1,c=t.route=function(t){t[0]?(s.hash=t,a(t)):l.on("H",t)};c.exec=function(t){t.apply(null,o(i()))},c.parser=function(t){o=t},c.stop=function(){u&&(n.removeEventListener?n.removeEventListener(e,a,!1):n.detachEvent("on"+e,a),l.off("*"),u=!1)},c.start=function(){u||(n.addEventListener?n.addEventListener(e,a,!1):n.attachEvent("on"+e,a),u=!0)},c.start()}}(O,"hashchange",t);var U,q=function(t){var e,n,i,o=/[{}]/g;return function(a){var r=O.settings.brackets||t;return e!==r&&(e=r,i=r.split(" "),n=i.map(function(t){return t.replace(/(?=.)/g,"\\")})),a instanceof RegExp?r===t?a:new RegExp(a.source.replace(o,function(t){return n[~~("}"===t)]}),a.global?"g":""):i[a]}}("{ }"),G=function(){function e(t,e){return t.indexOf(q(0))<0?(t=t.replace(/\n|\r\n?/g,"\n"),function(){return t}):(t=t.replace(q(/\\{/g),"￰").replace(q(/\\}/g),"￱"),e=o(t,a(t,q(/{/),q(/}/))),t=2!==e.length||e[0]?"["+e.map(function(t,e){return e%2?n(t,!0):'"'+t.replace(/\n|\r\n?/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':n(e[1]),new Function("d","return "+t.replace(/\uFFF0/g,q(0)).replace(/\uFFF1/g,q(1))+";"))}function n(t,e){return t=t.replace(/\n|\r\n?/g," ").replace(q(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w- "']+ *:/.test(t)?"["+a(t,/["' ]*[\w- ]+["' ]*:/,/,(?=["' ]*[\w- ]+["' ]*:)|}|$/).map(function(t){return t.replace(/^[ "']*(.+?)[ "']*: *(.+?),? *$/,function(t,e,n){return n.replace(/[^&|=!><]+/g,i)+'?"'+e+'":"",'})}).join("")+'].join(" ").trim()':i(t,e)}function i(t,e){return t=t.trim(),t?"(function(v){try{v="+t.replace(l,function(t,e,n){return n?'(("'+n+s+n+")":t})+"}catch(e){}return "+(e===!0?'!v&&v!==0?"":v':"v")+"}).call(d)":""}function o(t,e){var n=[];return e.map(function(e,i){i=t.indexOf(e),n.push(t.slice(0,i),e),t=t.slice(i+e.length)}),t&&n.push(t),n}function a(t,e,n){var i,o=0,a=[],r=new RegExp("("+e.source+")|("+n.source+")","g");return t.replace(r,function(e,n,r,s){!o&&n&&(i=s),o+=n?1:-1,o||null==r||a.push(t.slice(i,s+r.length))}),a}var r={},s='"in d?d:'+(t?"window).":"global)."),l=/(['"\/])(?:[^\\]*?|\\.|.)*?\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function\s*\()|([A-Za-z_$]\w*)/g;return function(t,n){return t&&(r[t]||(r[t]=e(t)))(n)}}(),z=function(t){function e(e){var a=e&&e.match(/^\s*<([-\w]+)/),r=a&&a[1].toLowerCase(),s=i[r]||o,l=k(s);return l.stub=!0,t&&r&&(a=r.match(V))?n(l,e,r,!!a[1]):l.innerHTML=e,l}function n(t,e,n,i){var a,r=k(o),s=i?"select>":"table>";r.innerHTML="<"+s+e+"</"+s,a=r.getElementsByTagName(n)[0],a&&t.appendChild(a)}var i={tr:"tbody",th:"tr",td:"tr",tbody:"table",col:"colgroup"},o="div";return t=t&&10>t,e}(R),J=[],K={};O.tag=function(t,e,n,i,o){return d(i)&&(o=i,/^[\w\-]+\s?=/.test(n)?(i=n,n=""):i=""),n&&(d(n)?o=n:_(n)),K[t]={name:t,tmpl:e,attrs:i,fn:o},t},O.mount=function(t,e,n){function i(t){var e="";return p(t,function(t){e+=", *["+M+'="'+t.trim()+'"]'}),e}function o(){var t=Object.keys(K);return t+i(t)}function a(t){var i;if(t.tagName){!e||(i=t.getAttribute(M))&&i==e||t.setAttribute(M,e);var o=P(t,e||t.getAttribute(M)||t.tagName.toLowerCase(),n);o&&l.push(o)}else t.length&&p(t,a)}var r,s,l=[];if(typeof e===H&&(n=e,e=0),typeof t===D?("*"===t?t=s=o():t+=i(t.split(",")),r=N(t)):r=t,"*"===e){if(e=s||o(),r.tagName)r=N(e,r);else{var u=[];p(r,function(t){u.push(N(e,t))}),r=u}e=0}return r.tagName?a(r):p(r,a),l},O.update=function(){return p(J,function(t){t.update()})},O.mountTo=O.mount,O.util={brackets:q,tmpl:G},typeof exports===H?module.exports=O:"function"==typeof define&&define.amd?define(function(){return t.riot=O}):t.riot=O}("undefined"!=typeof window?window:void 0);var utils={httpGet:function(t,e,n,i){var o=new XMLHttpRequest,t=utils.concatParams(t,e);o.open("GET",t,!0),o.send(null),o.onreadystatechange=function(){if(4===o.readyState&&(i&&"function"==typeof i&&i(),200===o.status)){var t=o.responseText;try{if("string"==typeof t)var e=JSON.parse(t);else var e=t}catch(a){alert("解析错误")}n(e)}}},httpPost:function(t,e,n,i){var o=new XMLHttpRequest;o.open("POST",t,!0),o.setRequestHeader("Content-type","application/json"),o.send(e),o.onreadystatechange=function(){if(4===o.readyState)if(i&&"function"==typeof i&&i(),200===o.status){try{var t=JSON.parse(o.responseText)}catch(e){console.log("解析错误")}n(t)}else console.log("网络错误")}},jsonp:function(t,e,n){var i=Date.now(),o=document.createElement("script"),a=document.getElementsByTagName("head")[0],t=utils.concatParams(t,e);if(e.callback)var r=t,s=e.callback;else{if(t.match(/\?/))var r=t+"&callback=jsonpCallback"+i;else var r=t+"?callback=jsonpCallback"+i;var s="jsonpCallback"+i}o.src=r,a.appendChild(o),window[s]=function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}n(t)},o.onerror=function(){console.log("jsonp error")},o.onload=function(){a.removeChild(o)}},htmlEncode:function(t){var e=document.createElement("div");return e.innerHTML=t,e.innerText},concatParams:function(t,e){if(t.match(/\?/))var n="&";else var n="?";for(i in e)n=n+i+"="+e[i]+"&";return n=n.replace(/&$/,""),t+n},setCookie:function(t,e,n,i){var o=new Date,i=i||"/";o.setTime(o.getTime()+n),document.cookie=t+"="+escape(e)+";path="+i+";expires="+o.toGMTString()},transBytes:function(t){var e=["B","KB","MB","GB","TB"];if(0==t)return"n/a";var n=parseInt(Math.floor(Math.log(t)/Math.log(1024)));return 0==n?t+e[n]:(t/Math.pow(1024,n)).toFixed(1)+e[n]},transTimes:function(t){var t=parseInt(t,10),e=new Date(1e3*t),n=(new Date).getTime()/1e3,i=n-t;if(86400>i)return e.getHours()+":"+e.getMinutes();if(i>86400&&172800>i)return"昨天";if(i>172800){var o=(e.getFullYear()+"-").substring(2),a=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",r=e.getDate()<10?"0"+e.getDate():e.getDate();return o+a+r}},hasClass:function(t,e){return t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},addClass:function(t,e){t.className.trim(),this.hasClass(t,e)||(t.className+=" "+e)},removeClass:function(t,e){if(utils.hasClass(t,e)){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}},toggleClass:function(t,e){if(utils.hasClass(t,e)){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}else t.className+=" "+e},insertAfter:function(t,e){var n=e.parentNode;n.lastChild==e?n.appendChild(t):n.insertBefore(t,e.nextSibling)},insertAfterText:function(t,e){var n=e.parentNode;if(n.lastChild==e)n.appendChild(t);else{var i=e.nextSibling;3===i.nodeType&&(i=i.nextSibling),n.insertBefore(t,i)}},isType:function(t){return function(e){return toString.call(e)==="[object "+t+"]"}},makeArray:function(){return Array.prototype.concat(obj)},extend:function(t,e){for(var n in e)t[n]||(t[n]=e[n])},deepCopy:function(t,e){var e=e||{};for(var n in t)"[object Object]"===toString.call(t[n])?(e[n]={},this.deepCopy(t[n],e[n])):"[object Array]"===toString.call(t[n])?(e[n]=[],this.deepCopy(t[n],e[n])):e[n]=t[n];return e}};utils.extend(utils,{isArray:utils.isType("Array"),isObject:utils.isType("Object"),isFunction:utils.isType("Function"),isElement:function(t){return-1!==toString.call(t).indexOf("Element")}}),utils.extend(utils,{jsLoader:function(){function t(){return d++}function e(t){return t.match(/\.css\??/)}function n(e){this.uri=e,this.cid=t(),this.status=C}function i(t,e){return i.then(t,e).start(),i}function o(t){throw t}function a(t){if(t||f.length)for(var e=0;e<t.task.length;e++){var n=t.task[e];s(n,t)}}function r(t,e){var i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=t.uri,c.appendChild(i),i=null,t.status=v,n.resolve.call(e)}function s(t,i){function o(e){if("error"===e.type&&(t.status=y),"load"===e.type&&(t.status=v),n.resolve.call(i,t),t.changeStatus){t.changeStatus=!1;for(var o=0;o<T[t.cid].length;o++){var a=T[t.cid][o];n.resolve.call(a.resolver,a.js)}T[t.cid]=null}s.onload=s.onerror=null,c.removeChild(s),s=null}if(m(t.uri))try{t.uri(),t.status=v,n.resolve.call(i)}catch(a){t.status=y,n.resolve.call(i)}else{if(t.status===v)return void n.resolve.call(i);if(e(t.uri))return void r(t,i);if(t.status===b)return t.changeStatus=!0,T[t.cid]=T[t.cid]||[],void T[t.cid].push({js:t,resolver:i});t.status=b;var s=document.createElement("script");s.async=!0,s.src=t.uri,s.onload=s.onerror=o,c.appendChild(s)}}function l(t){var e=u(t);return n.get(e?e:t)}function u(t){return i.alias[t]}var c=document.head||document.getElementsByTagName("head")[0],p={},d=0,f=[],g=utils.isArray,m=utils.isFunction,h=utils.makeArray,v="done",b="inprocess",y="rejected",C="pending",T={};return n.get=function(t){return p[t]||(p[t]=new n(t))},n.resolve=function(t){var e=this;if(e.status++,t&&t.status===y){var n=Error("Source: "+t.uri+" load failed");o(n)}e.status===e.task.length&&setTimeout(function(){e.callback&&e.callback(),e=null,a(f.shift())},7)},i.then=function(t,e){if(!t)return i;g(t)||(t=h(t));for(var n={task:[],callback:e,status:0},o=0;o<t.length;o++)n.task.push(l(t[o]));return f.push(n),i},i.start=function(){return a(f.shift()),i},i.alias={},i}()});var EventCtrl=EC=riot.observable(),iToolkit={};iToolkit.methodRegister=function(t,e){for(var n in iToolkit)if(t===n)return;iToolkit[t]=e},iToolkit.tableExtend={},riot.tag("date-picker","<yield>",function(t){var e=this,n=e.root,i=e.opts.opts||e.opts,o=document.scripts,a="",r="";if(i.path)a=i.path;else{for(var s=0;s<o.length;s++)if(o[s].src&&/iToolkit_pc.min.js|iToolkit_pc.js/.test(o[s].src)){r=o[s].src.replace(/iToolkit_pc.min.js|iToolkit_pc.js/,"");break}a=r+"plugins/laydate/"}var l=i.theme?i.theme:"default";utils.jsLoader([a+"laydate.min.js",a+"/need/laydate.css",a+"/skins/"+l+"/laydate.css"],function(){for(var t=0;t<n.children.length;t++){var i=n.children[t];i.attributes.pTrigger&&(e.pTrigger=i),i.attributes.media&&(e.media=i)}e.resolve(),e.update()}),this.resolve=function(){if(!e.pTrigger&&!e.media)throw"media and pTrigger property was not found in the element";return e.pTrigger===e.media&&(i.elem=i.pTrigger=e.media),"undefined"==typeof e.pTrigger&&(i.elem=e.media),e.pTrigger&&e.media&&e.pTrigger!==e.media&&(i.pTrigger=e.pTrigger,i.elem=e.media),e.pTrigger&&!e.media&&(i.elem=e.pTrigger,i.justChoose=!0),i.pTrigger?void(i.pTrigger.onclick=function(t){laydate(i)}):void laydate(i)}.bind(this)}),riot.tag("dropdown",'<yield> <div class="r-dropdown">{ title }</div> <ul class="r-downdown-menu"> <li class="r-dropdown-list" each="{ data }"><a href="{ link|\'javascript:void(0)\' }">{ name }</a></li> </ul>',function(t){{var e=this;e.root,e.opts.opts||e.opts}}),riot.tag("editable-link",'<a href="javascript:void(0);" if="{ !editable }" onclick="{ open }">{ value }</a> <super-form if="{ editable }" action="{ action }" opts="{ formOpts }"> <input type="text" value="{ parent.value }" name="{ parent.name }" class="editable-link-input"> <input type="submit" value="提交"> <button onclick="{ parent.close }">取消</button> </super-form>',function(t){var e=this;e.editlink=!1;var n=e.root,i=e.opts.opts||e.opts;e.on("mount",function(){e.action=n.getAttribute("action"),e.value=n.getAttribute("text"),e.name=n.getAttribute("name"),e.update()}),this.open=function(t){e.editable=!0,e.update()}.bind(this),this.close=function(t){e.editable=!1,e.update()}.bind(this),e.formOpts={errCallback:function(){i.errCallback(),n.querySelector(".editable-link-input").value=e.value,e.editable=!1,e.update()},callback:function(t){i.callback(),e.value=n.querySelector(".editable-link-input").value,e.editable=!1,e.update()}}}),riot.tag("goto-top",'<div class="itoolkit-goto-top" show="{ showGotoTop }" onclick="{ gotoTop }"> <yield> <span class="itoolkit-goto-top-icon" show="{ showDefault }"><span class="icon-arrowUp"></span></span> </div>',"goto-top .itoolkit-goto-top{ display: block; position: fixed; bottom: 50px; right: 40px; height: 60px; width: 60px; z-index: 10000; text-align: center; opicity: 0.5; cursor: pointer; } goto-top .itoolkit-goto-top .itoolkit-goto-top-icon{ font-size: 3em; margin: auto; float: none; }",function(t){var e=this;e.config=e.opts.opts||e.opts;var n=window.screen.availHeight,i=e.root;e.on("mount",function(){e.root.querySelector(".itoolkit-goto-top").style.bottom=e.config.bottom,e.root.querySelector(".itoolkit-goto-top").style.right=e.config.right,"itoolkit-goto-top-icon"===i.querySelector(".itoolkit-goto-top").firstElementChild.className&&(e.showDefault=!0),window.addEventListener("scroll",e.controlGotoTop)}),e.controlGotoTop=function(){var t=document.body;t.scrollTop>n&&!e.showGotoTop?(e.showGotoTop=!0,e.update()):t.scrollTop<n&&e.showGotoTop&&(e.showGotoTop=!1,e.update())},this.gotoTop=function(t){var e=document.body.scrollTop/100*16,n=setInterval(function(){document.body.scrollTop=document.body.scrollTop-e,document.body.scrollTop<10&&clearInterval(n)},16)}.bind(this)}),riot.tag("loading",'<div class="{itoolkit-loading: true, default: default}" > <yield> </div>',"loading .itoolkit-loading { text-align: center; }",function(t){{var e=this;e.opts.opts||e.opts}e["default"]=!0,e.on("mount",function(){var t=e.root.parentNode,n=window.getComputedStyle(t,null).position;"static"===n&&(t.style.position="relative"),e.childDom=e.root.getElementsByClassName("itoolkit-loading")[0],e.childDom.innerHTML.trim()&&(e["default"]=!1,e.update());var i=parseInt(window.getComputedStyle(e.childDom,null).height.replace("px",""),10);e.root.style.marginTop="-"+i/2+"px"}),e.root.show=function(){e.childDom&&(e.childDom.style.display="block")},e.root.hide=function(){e.childDom&&(e.childDom.style.display="none")}}),riot.tag("modal",'<div class="itoolkit-modal-dialog" riot-style="width:{width}; height:{height}"> <div class="itoolkit-modal-title"> <span>{ title }</span> <div class="itoolkit-modal-close-wrap" onclick="{ close }"> <div class="itoolkit-modal-close"></div> </div> </div> <div class="itoolkit-modal-container"> <yield> </div> </div>',function(t){{var e=this,n=e.opts.opts||e.opts;e.root}for(i in n)e[i]=n[i];e.width=n.width||600,e.height=n.height||"auto",e.on("mount",function(){var t=e.root.querySelector(".itoolkit-modal-container"),i=e.root.querySelector(".itoolkit-modal-title"),o=parseInt(window.getComputedStyle(i,null).height.replace("px",""));n.height&&(t.style.height=e.height-o-2+"px")}),this.close=function(t){e.root.style.display="none",e.onClose&&e.onClose()}.bind(this),document.querySelector("[modal-open-target='"+e.root.id+"']")&&(document.querySelector("[modal-open-target='"+e.root.id+"']").onclick=function(){e.root.style.display="block",e.onOpen&&e.onOpen()}),e.root.open=function(){e.root.style.display="block",e.onOpen&&e.onOpen()},e.root.close=function(){e.root.style.display="none",e.onClose&&e.onClose()},e.root.loadData=function(t,n){n=n||"data",e[n]=t,e.update()}}),riot.tag("paginate",'<div onselectstart="return false" ondragstart="return false"> <div class="paginate"> <li onclick="{ goFirst }">«</li> <li onclick="{ goPrev }">‹</li> </div> <ul class="paginate"> <li each="{ pages }" onclick="{ parent.changePage }" class="{ active: parent.currentPage == page }">{ page }</li> </ul> <div class="paginate"> <li onclick="{ goNext }">›</li> <li onclick="{ goLast }">»</li> </div> <div class="paginate"> <form onsubmit="{ redirect }" style="position:relative;"> <span class="redirect" if="{ redirect }">跳转到<input class="jumpPage" name="page" riot-type={"number"} style="width: 40px;">页 </span> <div class="paginate-tips" riot-style="top: { tipsTop }; left: { tipsLeft }; display: { showTip }"> 请输入1～{ pageCount }之间的数字 </div> <span class="page-sum" if="{ showPageCount }"> 共<em>{ pageCount }</em>页 </span> <span class="item-sum" if="{ showItemCount }"> <em>{ count }</em>条 </span> <input type="submit" style="display: none;"> </form> </div> </div>','.paginate .paginate-tips{ position: absolute; padding: 5px; border: 1px solid #ddd; background-color: #fff; -webkit-box-shadow: 0 0 10px #ccc; box-shadow: 0 0 10px #ccc; } .paginate .paginate-tips:before { content: ""; position: absolute; width: 0; height: 0; top: -16px; left: 10px; border: 8px solid transparent; border-bottom-color: #ddd; } .paginate .paginate-tips:after { content: ""; position: absolute; width: 0; height: 0; top: -15px; left: 10px; border: 8px solid transparent; border-bottom-color: #fff; }',function(t){var e=this,n=e.root,o=e.opts.opts||e.opts;if(e.showTip="none",e.count=o.count||0,e.pagesize=o.pagesize||20,e.pageCount=o.pageCount||Math.ceil(e.count/e.pagesize)||1,e.currentPage=o.currentPage||1,e.url=o.url||"",e.showNumber=o.showNumber||5,e.redirect=o.redirect||!0,e.showPageCount=o.showPageCount||!0,e.showItemCount=o.showItemCount||!0,e.needInit=o.needInit||!1,e.updateCurrentPage=function(){if(e.currentPage>Math.ceil(e.showNumber/2)&&e.pageCount>e.showNumber){if(e.pages=[],e.pageCount-e.currentPage>2)var t=e.currentPage-Math.ceil(e.showNumber/2),n=e.currentPage+Math.floor(e.showNumber/2);else var n=e.pageCount,t=e.pageCount-e.showNumber;for(i=t;i<n;i++)e.pages.push({page:i+1}),e.update()}else if(e.currentPage<Math.ceil(e.showNumber/2)+1&&e.pageCount>e.showNumber){for(e.pages=[],i=0;i<e.showNumber;i++)e.pages.push({page:i+1});e.pages.push({page:"..."})}},n.addCount=function(t){var n=e.count+t,i=e.pageCount;if(e.count=0>n?0:n,e.pageCount=Math.ceil(e.count/e.pagesize)||1,e.currentPage=e.currentPage>e.pageCount?e.pageCount:e.currentPage,e.pageCount<=e.showNumber){e.pages=[];for(var a=0;a<e.pageCount;a++)e.pages.push({page:a+1})}(e.needInit||e.pageCount<i&&e.currentPage<=e.pageCount)&&o.callback(e.currentPage),e.pageChange(e.currentPage),e.update()},e.pages=[],e.pageCount<e.showNumber+1)for(i=0;i<e.pageCount;i++)e.pages.push({page:i+1});else{for(i=0;i<e.showNumber;i++)e.pages.push({page:i+1});e.pages.push({page:"..."})}e.needInit&&o.callback(e.currentPage),e.updateCurrentPage(),e.update(),this.goFirst=function(t){e.pageChange(1)}.bind(this),this.goPrev=function(t){e.currentPage>1&&e.pageChange(e.currentPage-1)}.bind(this),this.goNext=function(t){e.currentPage<e.pageCount&&e.pageChange(e.currentPage+1)}.bind(this),this.goLast=function(t){e.pageChange(e.pageCount)}.bind(this),this.redirect=function(t){var n=parseInt(e.page.value,10);n&&n<e.pageCount+1&&n>0?e.pageChange(parseInt(n,10)):(e.tipsLeft=e.page.offsetLeft,e.tipsTop=e.page.offsetTop+e.page.offsetHeight+8,e.showTip="block",setTimeout(function(){e.showTip="none",e.update()},1500),e.update())}.bind(this),this.changePage=function(t){var n=t.item.page;return"string"==typeof n?!1:void e.pageChange(n)}.bind(this),e.pageChange=function(t){e.currentPage!=t&&(e.currentPage=t,o.callback(t)),e.updateCurrentPage()}}),riot.tag("select-box",'<div class="r-select" onclick="{ clicked }">{ placeholder }</div> <ul class="r-select-body" hide="{ hide }"> <li each="{ data }" index="{ index }" value="{ value }" class="r-select-item { selected }" onclick="{ parent.clickItem }">{ innerText }</li> </ul> <div style="display:none" class="inputHide"></div>',function(t){var e=this,n=e.root;e.config=e.opts.opts||e.opts,e.data=[],e.placeholder=e.config.placeholder,e.callback=e.config.callback,e.name=e.config.name,e.value=[],e.prevNode=null,n.getValue=function(){return e.value},e.hide=!0,this.clicked=function(t){e.hide=!1,e.update()}.bind(this),this.updateValue=function(t){for(var n=0;n<e.data.length;n++)e.data[n].selected&&(e.value.push(e.data[n].value),e.placeholder.push(e.data[n].innerText));e.value.length==e.size&&(e.hide=!0),e.placeholder=e.placeholder.join(","),e.prevNode=t,e.callback&&e.callback(e),e.update()}.bind(this),this.clickItem=function(t){var n=t.target||t.srcElement,i=+n.getAttribute("index");return e.value.length=0,e.placeholder=[],e.mutiple?(e.data[i].selected=e.data[i].selected?"":"selected",void e.updateValue(null)):(e.prevNode&&(e.data[+e.prevNode.getAttribute("index")].selected=""),e.data[i].selected="selected",void e.updateValue(n))}.bind(this),e.one("mount",function(){for(var t=0;t<e.config.data.length;t++){var n=e.config.data[t];n.selected="",n.index=t,e.data.push(n)}e.mutiple=e.config.mutiple||!1,e.size=e.mutiple?e.config.size?e.config.size:e.data.length:1,e.update()})}),riot.tag("side-list",'<ul > <li each="{ data }"> <img riot-src="{ logoUrl }" if="{ isLogo }"> <span>{ name }</span> </li> </ul>',function(t){}),riot.tag("slide","",function(t){}),riot.tag("super-div","<yield>","super-div{ display: block; }",function(t){var e=this,n=e.opts.opts||e.opts,o=e.root;for(i in n)e[i]=n[i];e.getData=function(t){var t=t||{};if(o.getAttribute("data-get"))var n="httpGet";else if(o.getAttribute("data-jsonp"))var n="jsonp";utils[n](e.superDivUrl,t,function(t){for(i in t)e.data={},e.data[i]=t[i];e.update()})},e.on("mount",function(){o.style.display="block",e.superDivUrl=o.getAttribute("data-get")||o.getAttribute("data-jsonp"),e.superDivUrl&&e.getData(n.params)}),e.loadData=o.loadData=function(t,n){n=n||"data",e[n]=t,e.update()},e.reload=o.reload=function(){e.superDivUrl?e.getData(n.params):e.update()}}),riot.tag("super-form",'<form onsubmit="{ submit }" > <yield> </form>',function(t){function e(t){s([],this)}function n(t){return Object.prototype.toString.call(t).match(/\ (.*)\]/)[1]}function o(t){var e=n(t);return"Null"===e||"Undefined"===e||"Function"===e?t:new window[e](t)}function a(t){for(var t=t,e=t.attributes,n={},i=0;i<e.length;i++){var o=e[i];n[o.name]=o.value}return n.value=t.value,n}function r(t){for(var e=0;e<d.length;e++)if(t[d[e]])return!0;return!1}function s(t,e){var n=e,i=a(e);if(r(i)){var o=new l.Validation(t,i.name,n);if(i.name){if((i.allowEmpty||i.allowempty)&&""===i.value)return void l.onValidPass(n,l.successTips);l.validEmpty(o,i),i.valid?l.rules[i.valid]?l.valid(i.valid,o,i):f[i.valid.toUpperCase()]&&l.validNumRange(o,i):i.valid||(i.customValid||i.customvalid?l.validCustom(o,i):(i.min||i.max)&&l.comparator("string").handler(o,i))}t.length||l.validUnion(o,t,n,i),o.validTip()}}var l=this,u=l.root,c=l.opts.opts||l.opts,p=["insertTip","ajaxSubmit","submit","removeTips","insertTip","removeTip","loadData","getData","setData"],d=["allowEmpty","allowempty","max","min","valid","customValid","customvalid","vr"],f={NON_NEGATIVE_INT:/^0$|^-[1-9]\d*$/,POSITIVE_INT:/^[1-9]\d*$/,NON_POSITIVE_INT:/^[1-9]\d*$|^0$/,NEGATIVE_INT:/^-[1-9]\d*$/,INT:/^-?[1-9]\d*$|^0$/,NON_NEGATIVE_FLOAT:/^(\d)(\.\d+)?$|^([1-9]\d*)(\.\d+)?$|^0$/,POSITIVE_FLOAT:/^(\d)(\.\d+)?$|^([1-9]\d*)(\.\d+)?$/,NON_POSITIVE_FLOAT:/^(-\d)(\.\d+)?$|^(-[1-9]\d*)(\.\d+)?$|^0$/,NEGATIVE_FLOAT:/^(-\d)(\.\d+)?$|^(-[1-9]\d*)(\.\d+)?$/,FLOAT:/^(-?\d)(\.\d+)?$|^(-?[1-9]\d*)(\.\d+)?$|^0$/};l.presentWarning="必填",l.emailWarning="邮箱格式错误",l.mobileWarning="手机格式错误",l.urlWarning="网址格式错误",l.successTips=c.successTipsText||"通过",l.regexpWarning="字段不符合验证规则",l.numWarning="数字格式错误",l.passClass=c.passClass||"valid-pass",l.failedClass=c.failedClass||"valid-failed",l.comparator=function(t){return{handler:function(e,n){switch(t){case"number":return l.numComparator(e,n);case"string":default:return l.strCompatator(e,n)}}}},l.strCompatator=function(t,e){var n=parseInt(e.min,10),i=parseInt(e.max,10),o=isNaN(n),a=isNaN(i),r=e.value.length;return o||a?(!o&&n>r&&t.msg.push(l.minWarning(n)),!a&&r>i&&t.msg.push(l.maxWarning(i))):(r>i||n>r)&&t.msg.push(l.bpWarning(n,i)),t},l.numComparator=function(t,e){var n=parseInt(e.min,10),i=parseInt(e.max,10),o=isNaN(n),a=isNaN(i),r=+e.value;return o||a?(!o&&n>r&&t.msg.push(l.minNumWarning(n)),!a&&r>i&&t.msg.push(l.maxNumWarning(i))):(r>i||n>r)&&t.msg.push(l.numBpWarning(n,i)),t},l.one("mount",function(){if(u.style.display="block",c.realTime&&c.valid)for(var t=l.root.getElementsByTagName("form")[0].elements,n=0,i=t.length;i>n;n++){var o=t[n].type;("submit"!==o||"button"!==o)&&(t[n].addEventListener("input",e,!1),t[n].addEventListener("change",e,!1));

}}),u.loadData=function(t,e){if(utils.isObject(t))for(var n in t)t[n]=o(t[n]);else t=o(t);e=e||"data",l[e]=t,l.update()},u.setData=function(t,e){l.data[e]=o(t),l.update()},l.checkExistKey=function(t,e,n){if(t.hasOwnProperty(e))if(utils.isArray(t[e]))t[e].push(n);else{var i=[];i.push(t[e]),i.push(n),t[e]=i}else t[e]=n},l.getData=u.getData=function(){for(var t=l.root.getElementsByTagName("form")[0].elements,e={},n=0;n<t.length;n++)if(t[n].name){var i;if("SELECT"===t[n].tagName)for(var o=t[n].options,a=0;a<o.length;a++)o[a].selected&&(i=o[a].value,l.checkExistKey(e,t[n].name,encodeURIComponent(i)));else"checkbox"===t[n].type||"radio"===t[n].type?t[n].checked&&(i=t[n].value,l.checkExistKey(e,t[n].name,encodeURIComponent(i))):(i=t[n].value,l.checkExistKey(e,t[n].name,encodeURIComponent(i)))}return e},l.submitingText=c.submitingText||"提交中...",void 0===c.valid&&(c.valid=!0),l.maxWarning=c.maxWarning||function(t){return"不得超过"+t+"个字符"},l.minWarning=c.minWarning||function(t){return"不得小于"+t+"个字符"},l.bpWarning=c.bpWarning||function(t,e){return"只允许"+t+"-"+e+"个字符"},l.minNumWarning=c.minNumWarning||function(t){return"不得小于"+t},l.maxNumWarning=c.maxNumWarning||function(t){return"不得大于"+t},l.numBpWarning=c.numBpWarning||function(t,e){return"输入数字应在"+t+"-"+e+"之间"},l.removeTips=u.removeTips=function(){function t(){for(o=0;o<i.length;o++)i[o].parentNode.removeChild(i[o]),i.length&&t()}var e=l.root,n=e.getElementsByTagName("form")[0].elements,i=e.getElementsByClassName("tip-container");i&&i.length&&t();for(var o=0;o<n.length;o++)utils.removeClass(n[o],l.passClass),utils.removeClass(n[o],l.failedClass)},l.removeTipNode=function(t){var e=t.nextElementSibling;e&&e.className.match(/tip-container/)&&t.parentNode.removeChild(e)},l.removeTip=u.removeTip=function(t){l.removeTipNode(t),utils.removeClass(t,l.passClass),utils.removeClass(t,l.failedClass)},l.insertTip=u.insertTip=function(t,e,n){l.removeTipNode(t);var i=document.createElement("span");i.className=n,i.innerHTML=e,utils.insertAfterText(i,t)},l.onValidRefuse=u.onValidRefuse=c.onValidRefuse||function(t,e){l.insertTip(t,e,"tip-container"),utils.removeClass(t,l.passClass),utils.addClass(t,l.failedClass)},l.onValidPass=u.onValidPass=c.onValidPass||function(t,e){l.insertTip(t,e,"tip-container success"),utils.removeClass(t,l.failedClass),utils.addClass(t,l.passClass)},l.ajaxSubmit=function(t,e){for(var n="",i=0;i<t.length;i++){if(t[i].name){var o;if("SELECT"===t[i].tagName)for(var a=t[i].options,r=0;r<a.length;r++)a[r].selected&&(o=a[r].value,n+=t[i].name+"="+encodeURIComponent(o)+"&");else"checkbox"===t[i].type||"radio"===t[i].type?t[i].checked&&(o=t[i].value,n+=t[i].name+"="+encodeURIComponent(o)+"&"):(o=t[i].value,n+=t[i].name+"="+encodeURIComponent(o)+"&")}if("submit"===t[i].type){var s=t[i],u="BUTTON"===s.tagName?"innerHTML":"value",p=s[u];s.disabled="disabled",s[u]=l.submitingText}}var d=new XMLHttpRequest;d.open("POST",e,!0),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send(n),d.onreadystatechange=function(){if(4===d.readyState)if(l.removeTips(),s[u]=p,s.disabled=!1,c.complete&&"function"==typeof c.complete&&c.complete(),200===d.status)try{var t=JSON.parse(d.responseText);c.callback&&c.callback(t),EC.trigger("submit_success",t)}catch(e){throw new Error(e.message)}else c.errCallback&&c.errCallback(n),EC.trigger("submit_error",n)}},this.submit=function(t){var e=[],n=l.root.getElementsByTagName("form")[0].elements,i=l.action||l.root.getAttribute("action"),o=i;if(c.valid)for(var a=0;a<n.length;a++)s(e,n[a]);if(!e.length)try{c.beforeSubmit&&c.beforeSubmit(e)}catch(t){e.push(t)}return e.length?!1:c.normalSubmit?(l.root.firstChild.setAttribute("action",i),!0):(t.preventDefault(),void l.ajaxSubmit(n,o))}.bind(this),l.Validation=function(t,e,n){this.msg=[],this.validTip=function(){this.msg.length?(l.onValidRefuse(n,this.msg[0]),t.push(e)):c.forbidTips?l.removeTip(n):l.onValidPass(n,l.successTips)}},l.rulesConfig={email:{regexp:/^([a-zA-Z0-9_\-\.])+\@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/,msg:l.emailWarning},present:{regexp:/\S+/,msg:l.presentWarning},url:{regexp:/((http|ftp|https|file):\/\/([\w\-]+\.)+[\w\-]+(\/[\w\u4e00-\u9fa5\-\.\/?\@\%\!\&=\+\~\:\#\;\,]*)?)/,msg:l.urlWarning},mobile:{regexp:/^1[3|4|5|8][0-9]\d{4,8}$/,msg:l.mobileWarning}},l.valid=function(t,e,n){if(l.rules[t]){var i=l.rules[t](n);return i===!0?l.comparator("string").handler(e,n):e.msg.push(i),e}},l.validNumRange=function(t,e){var n=f[e.valid.toUpperCase()];return n.test(e.value)?l.comparator("number").handler(t,e):t.msg.push(l.numWarning),t},l.validCustom=function(t,e){var n=e.customValid||e.customvalid;if(window[n]){var i=window[n].regExp,o=window[n].message||l.regWarning;i&&i.test(e.value)?l.comparator("string").handler(t,e):t.msg.push(o)}return t},l.validUnion=function(t,e,n,i){if(i.vr){var o=i.vr.split("::"),a=o[0],r=o[1]?o[1].split(","):void 0,s=!1;try{s=iToolkit[a].apply(n,r)}catch(l){throw s=!1,l}s||t.msg.push("")}return t},l.validEmpty=function(t,e){return""===e.value&&t.msg.push(l.presentWarning),t},l.on("mount",function(){l.init()}),l.init=function(){for(i in c)p.indexOf(i)<0&&(l[i]=l.hasOwnProperty(i)?utils.deepCopy(c[i],l[i]):c[i]);l.data=c.data,l.rules={};for(ruleConfig in l.rulesConfig)!function(t){l.rules[t]=function(e){return e.value.match(l.rulesConfig[t].regexp)?!0:l.rulesConfig[t].msg}}(ruleConfig)}}),riot.tag("tab",'<ul> <li each="{ data }" onclick="{ parent.toggle }" class="{ active: parent.currentIndex==index }">{ title }</li> </ul> <div class="tab-content" riot-tag="tab-content"></div>',function(t){var e=this,n=e.opts.opts||e.opts;if(e.data=n.data,e.data.length>0)for(e.currentIndex=0,e.content=e.data[0].content,i=0;i<e.data.length;i++)e.data[i].index=i;this.toggle=function(t){e.content=t.item.content,e.currentIndex=t.item.index,e.update()}.bind(this)}),riot.tag("tab-content","",function(t){var e=this;e.parent.on("update",function(){e.root.innerHTML=e.parent.content})}),riot.tag("tree-item",'<input type="checkbox" __checked="{ item.selected }" if="{ parent.rootConfig.showCheck }" onchange="{ checkHandle }"> <i class="tree-item-arrow { open: item.opened }" onclick="{ toggle }" if="{ item.children }"></i> <i class="tree-item-icon" if="{ item.children }"></i> <div onclick="{ leftClick }">{ item.name }</div>',function(t){var e=this;e.selectchildren=function(t,n){var i=function(t){if(t&&t.children)for(var e=0;e<t.children.length;e++)t.children[e].selected=n,i(t.children[e])};i(t,n),e.parent.treeroot.update()},e.cancelParent=function(t){var n=function(t){t&&t.pnode&&(t.pnode.selected=!1,n(t.pnode))};n(t),e.parent.treeroot.update()},this.checkHandle=function(t){var n=e.parent.rootConfig,i=n.onCheck,o=n.onUnCheck;e.item.selected?(e.item.selected=!1,o&&o(e.item,t.target),n.link&&(e.selectchildren(e.item,!1),e.cancelParent(e.item))):e.item.selected||(e.item.selected=!0,i&&i(e.item,t.target),n.link&&e.selectchildren(e.item,!0))}.bind(this),this.toggle=function(t){e.item.opened=e.item.opened===!0?!1:!0,e.parent.treeroot.update()}.bind(this),this.leftClick=function(t){var n=e.parent.rootConfig;if(n.folder&&n.children)e.item.opened=e.item.opened===!0?!1:!0;else{var i=n.onLeftClick;i&&i(e.item,t.target)}}.bind(this)}),riot.tag("tree",'<div class="tree-item-wrap" each="{ item, i in data }" onselectstart="return false" ondragstart="return false"> <tree-item class="tree-item-row { root: item.level==1 }" riot-style="padding-left: { countPadding(item.level) }"></tree-item> <ul class="tree-child-wrap" if="{ item.opened && item.children }"> <tree data="{ item.children }"></tree> </ul> </div>',function(t){var e=this;if(e.config=e.opts.opts||e.opts,e.dataHandle=function(t,n,i){var t=t||[],o=n||"id",a=i||"pid",r={};t.forEach(function(t){e.config.name&&(t.name=t[e.config.name]),r[t[o]]=t});var s=[];t.forEach(function(t){var e=r[t[a]];e?(e.children||(e.children=[]),t.pnode=e,e.children.push(t)):s.push(t)});var l=function(t,n){var n=n+1;t.forEach(function(t){t.level=n-1,t.level<e.config.openLevel+1&&(t.opened=!0),t.children&&l(t.children,n)})};return l(s,1),s},e.parent&&"TREE"===e.parent.root.tagName)e.data=e.config.data,e.rootConfig=e.parent.rootConfig||e.parent.parent.rootConfig,e.treeroot=e.parent.treeroot||e.parent.parent.treeroot;else{if(e.config.handleData){var n=e.dataHandle(e.config.data);e.data=n}e.rootConfig=e.config,e.treeroot=e}e.treeroot.update(),this.countPadding=function(t){var n=e.rootConfig.padding||20;return(t-1)*n+"px"}.bind(this)});