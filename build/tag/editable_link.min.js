riot.tag("editable-link",'<a href="javascript:void(0);" if="{ !editable }" onclick="{ open }">{ value }</a> <super-form if="{ editable }" action="{ action }" opts="{ formOpts }"> <input type="text" value="{ parent.value }" name="{ parent.name }" class="editable-link-input"> <input type="submit" value="提交"> <button onclick="{ parent.close }">取消</button> </super-form>',function(t){var e=this;e.editlink=!1;var a=e.root,i=e.opts.opts||e.opts;e.on("mount",function(){e.action=a.getAttribute("action"),e.value=a.getAttribute("text"),e.name=a.getAttribute("name"),e.update()}),this.open=function(t){e.editable=!0,e.update()}.bind(this),this.close=function(t){e.editable=!1,e.update()}.bind(this),e.formOpts={errCallback:function(){i.errCallback(),a.querySelector(".editable-link-input").value=e.value,e.editable=!1,e.update()},callback:function(t){i.callback(),e.value=a.querySelector(".editable-link-input").value,e.editable=!1,e.update()}}});