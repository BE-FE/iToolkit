<html>
    <head>
        <meta charset='utf-8'>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <link rel="stylesheet" href="http://apps.bdimg.com/libs/bootstrap/3.3.0/css/bootstrap.css">
        <link rel="stylesheet" href="src/css/common.css">
        <link rel="stylesheet" href="src/css/themes/simple_pc.css">
        
        <!-- IE兼容  -->
        <!--[if lt IE 9]>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.0.5/es5-shim.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
            <script>html5.addElements('test')</script>
        <![endif]-->
        <script src="src/lib/riot.js"></script>
        <script src="src/iToolkit_pc.js"></script>
        <style>
            #fixed-list {
                width: 350px;
                position: fixed;
            }

            #tree-wrap {
                height: 220px;
                width: 200px;
                border: 1px solid #e5e5e5;
                padding-top: 10px;
            }
        </style>
    </head>
    <body>
        <nav class="navbar navbar-default">
          <div class="container-fluid">
            <div class="navbar-header">
              <a class="navbar-brand" href="#">iToolkit-PC</a>
            </div>
          </div>
        </nav>
        <div class="container">
            <div class="col-xs-4">
                <div class="list-group" id="fixed-list">
                    <h4>通用组件</h4>
                    <a href="#tree" class="list-group-item">Tree (可用)</a>
                    <a href="#tab" class="list-group-item">Tab (可用)</a>
                    <a href="#table" class="list-group-item">Table (可用)</a>
                    <a href="#paginate" class="list-group-item">Paginate (可用)</a>
                    <a href="#modal" class="list-group-item">Modal (可用)</a>
                    <a href="#ajax-form" class="list-group-item">Ajax-Form (可用)</a>
                    <a class="list-group-item">Ajax-File-upload (规划中)</a>
                    <a class="list-group-item">Slider (规划中)</a>
                    <h4>样式组件</h4>
                    <a class="list-group-item">Nav-Bar (规划中)</a>
                    <a class="list-group-item">Foot-Bar (规划中)</a>
                    <a class="list-group-item">Side-list (规划中)</a>
                </div>
            </div>
            <div class="col-xs-8">
                <section id='tree'>
                    <h2>Tree</h2><hr>
                    <div id="tree-wrap">
                        <tree></tree>
                    </div>
                </section>


                <section id="tab">
                    <h2>Tab</h2><hr>
                    <tab></tab>
                </section>

                <section id="table">
                    <h2>Table</h2><hr>
                    <table-view>
                        <rcol name="city"><a href="<%= desc%>"><%= city%></a></rcol>
                        <rcol name="desc" width="20px"></rcol>
                        <rcol name="name" alias="姓名"></rcol>
                    </table-view>
                    <button class="btn btn-default" onclick="recoverTable()">恢复初始值</button>
                    <button class="btn btn-default" onclick="reloadTable()">加载新数据</button>
                    <button class="btn btn-default" onclick="appendCell()">追加数据</button>
                    <button class="btn btn-default" onclick="deleteCell()">删除指定数据</button>
                    <button class="btn btn-default" onclick="clearCell()">清空数据</button>
                    <button class="btn btn-default" onclick="orderCell()">指定字段排序</button>
                    <button class="btn btn-default" onclick="reverseCell()">指定字段倒序</button>
                </section>
                
                <section id="paginate">
                    <h2>Paginate</h2><hr>
                    <paginate></paginate>
                    <p>The page number is <b id="page-number"></b></p>
                </section>


                <section id="modal">
                    <h2>Modal</h2>
                    <button modal-open-target='modal-demo' class="btn btn-default">打开模态框</button>
                    <modal id="modal-demo">
                        <h1>welcome!</h1>
                        <p>welcome, king under the montain!</p>
                    </modal>
                    
                </section>

                <section id="ajax-form">
                    <h2>Super-form</h2><hr>
                    <super-form action="/test">
                        <input name="t1" value="{ data.a }" show="{ data.a==1 }">
                        <input name="t2" value="{ data.b }" onsubmit="{ valid({max: 10}) }">
                        <input name="t3" value="{ data.b }" oninput="{ valid({min: 10}) }">
                        <input type="submit" value="提交">
                    </super-form>
                </section>
            </div>
        </div>



<!-- JavaScript-->
        <script>
            window.onscroll = function() {
                var ele = document.getElementById('fixed-list');
                if (document.body.scrollTop > 60) {
                    ele.style.top = '10px';
                }
                else {
                    ele.style.top = '70px';
                }
            }
            
            String.prototype.escapeHTML = function () {                                        
              return(                                                                 
                this.replace(/>/g,'&gt;').
                     replace(/</g,'&lt;').
                     replace(/"/g,'&quot;')
              );
            };
            var codeEles = document.getElementsByTagName('pre');
            if (codeEles) {
                for (i = 0; i < codeEles.length; i++) {
                    codeEles[i].innerHTML = codeEles[i].innerHTML.escapeHTML();
                }
            }
            /*
             *  tab切换
             */
            var tabOpts = {
                data: [
                   { title: 'tab1', content: '1111'},
                   { title: 'tab2', content: '2222'},
                   { title: 'tab3', content: '3333'}
                ]
            }
            riot.mount('tab', tabOpts);

            /*
             *  table
             */
            var tableOpts = {
                data: [
                    {city: 'BeiJing', name: 'Sherman', desc: 'he is a Tank'},
                    {city: 'ShangHai', name: 'Ruth', desc: 'she is a nice girl'},
                    {city: 'ChengDu', name: 'Billy', desc: 'hehehe'},
                    {city: 'GuangZhou', name: 'Silly', desc: 'bad weather!'}
                ],
                class: 'table',
                showHeader: 'true',
                fixHeader: 'true'
            }
            riot.mount('section table-view', tableOpts);
            riot.mount('rcol');

            function recoverTable() {
                dom = document.querySelector('table-view');
                dom.loadData([
                    {city: 'BeiJing', name: 'Sherman', desc: 'he is a Tank'},
                    {city: 'ShangHai', name: 'Ruth', desc: 'she is a nice girl'},
                    {city: 'ChengDu', name: 'Billy', desc: 'hehehe'},
                    {city: 'GuangZhou', name: 'Silly', desc: 'bad weather!'}
                ]);
            }

            function reloadTable() {
                dom = document.querySelector('table-view');
                dom.loadData([{city: 'LuoYang', name: 'mudan', desc: 'It is pretty'}]);
            }

            function appendCell() {
                dom = document.querySelector('table-view');
                dom.appendData({city: 'LuoYang', name: 'mudan', desc: 'It is pretty'});
            }

            function deleteCell() {
                dom = document.querySelector('table-view');
                dom.deleteData('city', 'LuoYang');
            }
            function clearCell() {
                dom = document.querySelector('table-view');
                dom.clearData();
            }

            function orderCell() {
                dom = document.querySelector('table-view');
                dom.orderData('city');
            }

            function reverseCell() {
                dom = document.querySelector('table-view');
                dom.reverseData('city');
            }
            /*
             *  分页
             */
            var pageOpts = {
                count: 120,
                pagesize: 10,
                showNumber: 5,
                callback: function(index) {
                    document.getElementById('page-number').innerHTML = index;
                }
            }
            riot.mount('paginate', pageOpts);


            /*
             *  模态弹出框
             */
            var modalOpts = {
                height: 300,
                width: 300,
                title: '模态框demo'
            }
            riot.mount('modal', modalOpts);

            /*
             *  树结构
             */
            var treeOpts = {
                data: [
                    {id: 1, pid: null, title: 'root'},
                    {id: 2, pid: 1, title: 'item1'},
                    {id: 3, pid: 1, title: 'item2'},
                    {id: 4, pid: 2, title: 'item3'},
                    {id: 5, pid: 1, title: 'item4'},
                    {id: 6, pid: 3, title: 'item5'},
                    {id: 7, pid: 2, title: 'item6'},
                ],
                root: true,
                handleData: true,
                name: 'title',
                onLeftClick: function(item, target) {
                    alert('This item\'s id is: ' + item.id);
                }
            }
            riot.mount('tree', treeOpts);

            /*
             *  Ajax form 提交
             */
            var formOpts = {
                data: {
                    a: 1,
                    b: 'hehe'
                },
                callback: function() {
                    alert('success');
                },
                errCallback: function(params) {
                    alert("error, params:" + params);
                },
                //normalSubmit: true
            }
            riot.mount('super-form', formOpts);

        </script>
    </body>
</html>